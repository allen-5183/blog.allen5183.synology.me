<!DOCTYPE html>
<html>
<head>
<title>webduino.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>
<link rel="stylesheet" href="file:///e%3A/USB%20%E5%82%99%E4%BB%BD/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%B6%B2%E9%A0%81%28%E4%B8%80%29/volume1/web/blog.allen5183.synology.me/source/_posts/markdown.css" type="text/css">
<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js'></script>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.css' />
<script src='https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js'></script>
<h2 id="%E8%B3%87%E6%BA%90">資源</h2>
<ul>
<li><a href="https://github.com/webduinoio">GitHub</a></li>
</ul>
<h2 id="webdunio-%E8%88%87-adrunio-%E7%9A%84%E5%B7%AE%E7%95%B0">Webdunio 與 Adrunio 的差異</h2>
<table>
<thead>
<tr>
<th></th>
<th>Ardunio</th>
<th>Webdunio</th>
</tr>
</thead>
<tbody>
<tr>
<td>開發語言</td>
<td>C/C++</td>
<td>HTML/Javascript</td>
</tr>
<tr>
<td>開發環境</td>
<td>Ardunio IDE</td>
<td>瀏覽器、網頁編輯器</td>
</tr>
<tr>
<td>連接方式</td>
<td>USB、藍芽</td>
<td>WiFI、WebSpcket</td>
</tr>
<tr>
<td>更新程式</td>
<td>連接燒錄</td>
<td>立即更新、連線燒錄</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Ardunio 屬單機作業，不需連接伺服器端，即可獨立工作開發。
Webdunio 屬連線作業，需連接上伺服器(雲端平台)，是線上開發。</p>
</blockquote>
<h2 id="webduino-%E7%9A%84%E9%96%8B%E7%99%BC%E6%A8%A1%E5%BC%8F">Webduino 的開發模式</h2>
<p>要說是 Webduino 開發模式，不如說是「Web 開發模式」，簡單來說就是如果要「透過網頁」控制物聯網的開發板，就必須在網頁裡頭載入對應的 JavaScript，這樣才能使用對應的 API 來操控 開發板的腳位 (其實就跟網頁載入 JQuery 一模一樣)，舉例來說，當我們已經載入了對應的 JavaScript，只要網頁裡綁定一個 <code>led.on()</code> 的事件，對應的 led 燈就會亮起</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212230450.png" alt="20210212230450"></p>
<p><a data-fancybox="gallery" href='hhttps://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212230450.png'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212230450_s.png' class="nofancybox  img-center" /></a></p>
<p>常見的物聯網連線控制的方法有四種：**網際網路控制 (W-Fi)、區域網路控制 (WebSocket)、藍芽 (Bluetooth) 和序列埠 (Serial Port)，</p>
<p>這四種方式各有各的好處，舉例來說要在台灣控制美國的裝置，就必須使用 Wi-Fi 控制，如果要一次穩定的控制「手邊的」多台裝置，就可以考慮 WebSocket 和 Bluetooth 連線，如果只想單純接線控制，就可以採用 Serial Port 的做法。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212230707.png'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212230707_s.png' class="nofancybox  img-center" /></a></p>
<p><img src="" alt="20210212230707"></p>
<h2 id="%E9%80%A3%E7%B7%9A%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95">連線控制方法</h2>
<h2 id="%E5%85%83%E4%BB%B6%E4%BB%8B%E7%B4%B9">元件介紹</h2>
<h3 id="1-%E7%8E%A9%E5%85%B7%E8%88%87%E9%A6%AC%E9%81%94">1. 玩具與馬達</h3>
<h4 id="11-%E4%BC%BA%E6%9C%8D%E9%A6%AC%E9%81%94">1.1. 伺服馬達</h4>
<ul>
<li>
<p>概要
伺服馬達之所以叫做「伺服」馬達，是因為「伺服 servo」表示馬達會依照指示命令動作，由程式要馬達轉幾度，馬達就會轉幾度，但伺服馬達有機械結構上的限制，旋轉的角度是 180 度，但並非完全的 180 度，可能是 1 度到 180 度，或是 -2 度到 177 度都有可能，不過這些誤差都不影響這個範例的實作，這個範例將會介紹如何用 Blockly、HTML 與 JavaScript 去控制伺服馬達。</p>
</li>
<li>
<p>範例影片展示
影片對應範例：<a href="https://blockly.webduino.io/?page=tutorials/servo-1">https://blockly.webduino.io/?page=tutorials/servo-1</a></p>
<div class="video-container">
  <iframe width="560" height="316" src="https://www.youtube.com/embed/Dar2pSWCSL8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</li>
<li>
<p>接線與實作
由於伺服馬達需要的電流量較大，因此必須採用獨立電源或是直接使用開發板上頭的 <code>VCC</code>，才能供應伺服馬達足夠的電流量，伺服馬達具有三條電線。紅色的為正電，深咖啡色是接地 <code>GND</code>，橘色的則是訊號線，而伺服馬達的訊號源接在 <code>11</code> 的腳位即可。</p>
<blockquote>
<p>由於 Webduino 支援開發板種類只會越來越多，接線圖先使用馬克一號與 Fly 示範，對於其他開發板來說，只要 訊號腳接數位腳 (數字)，仍會有一樣的效果。</p>
</blockquote>
</li>
<li>
<p>馬克一號接線示意圖：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211235139.png" alt="馬克一號接線伺服馬達"></p>
</li>
<li>
<p>Fly 接線示意圖：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211235321.png" alt="FLY 接線伺服馬達"></p>
</li>
<li>
<p>基本操作
打開 <a href="https://blockly.webduino.io">Webduino Blockly 編輯工具</a>，在畫面中放入開發板積木，填入 Device ID，在開發板內放入伺服馬達的積木，腳位設定 10，伺服馬達變數名稱設定為 servo。</p>
<blockquote>
<p>開發板的積木在「開發板控制」目錄下，伺服馬達積木在「玩具及馬達 &gt; 伺服馬達」的目錄下。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211235415.png" alt="伺服馬達 Blockly"></p>
</blockquote>
<p>放入「伺服馬達 servo 旋轉角度」的積木，可以透過圓餅圖調整角度，或直接使用數字積木顯示度數，伺服馬達角度區間為 0~180 度。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211235442.png" alt="伺服馬達旋轉角度"></p>
<p>填入裝置 Device ID，確認開發板上線，點選右上方紅色按鈕執行，就可以看到伺服馬達旋轉到指定的角度。</p>
<blockquote>
<p>範例解答：<code>https://goo.gl/IHNms0</code></p>
</blockquote>
<p>進階一點，如果透過「迴圈」和「等待」的積木，就可以自訂伺服馬達左右擺動十次的效果，要實現這個效果，首先放入「重複 10 次」的迴圈積木，在裡頭第一個放入伺服馬達旋轉到 180 度的積木，後面銜接一個「等待 0.5 秒」的積木，接著再放入旋轉到 0 度的積木，再銜接一個「等待 0.5 秒」的積木，如此一來就會重複這些動作十次。</p>
<blockquote>
<p>迴圈的積木在「基本功能 &gt; 迴圈」目錄下，等待的積木在「進階功能 &gt; 等待」目錄下。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211235539.png" alt="伺服馬達 Blockly"></p>
</blockquote>
<p>填入裝置 Device ID，確認開發板上線，點選右上方紅色按鈕執行，就可以看到伺服馬達先旋轉到一側，接著就會旋轉到另一側，重複這樣一輪的動作十次。</p>
<blockquote>
<p>範例解答 (雲端平台)：<code>https://blocklypro.webduino.io/#7ylGNpvKze</code>
範例解答 ( 體驗版 )：<code>https://goo.gl/TKax8r</code></p>
</blockquote>
</li>
<li>
<p>網頁拉霸操控伺服馬達
接下來，我們可以透過網頁操控伺服馬達，打開 Webduino Blockly 的網頁互動測試區，下拉選單選擇「拉霸操作」，畫面裡會出現一個網頁拉霸，此時在右下角也會出現對應的積木功能可以選擇。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211235829.png" alt="網頁互動拉霸"></p>
<p>一開始先設定拉霸數值和伺服馬達旋轉角度都是 90 度，因為這樣才會先讓伺服馬達旋轉到中間的位置。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211235859.png" alt="網頁互動拉霸"></p>
<p>再來就是透過拉霸的積木，指定最大值、最小值、間距和預設值，拉動拉霸的時候，會顯示拉霸的數值，同時伺服馬達也會旋轉到這個角度。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211235919.png" alt="拉霸控制伺服馬達旋轉角度"></p>
<p>填入裝置 Device ID，確認開發板上線，點選右上方紅色按鈕執行，就可以使用網頁拉霸操控伺服馬達，拉霸往右伺服馬達就旋轉到右邊，往左就旋轉到左邊。</p>
<blockquote>
<p>範例解答 ( 雲端平台 )：<code>https://blocklypro.webduino.io/?demo=demo-area-06#XQdja1Ew9Q</code>
範例解答 ( 體驗版 )：<code>https://goo.gl/q8cBsb</code></p>
</blockquote>
</li>
<li>
<p>相關參考</p>
<ul>
<li>範例解答 - 伺服馬達基本操控(雲端平台)：<code>https://blocklypro.webduino.io/#7ylGNpvKze</code></li>
<li>範例解答 - 網頁操控伺服馬達 (雲端平台)：<code>https://blocklypro.webduino.io/?demo=demo-area-06#XQdja1Ew9Q</code></li>
<li>範例完整程式碼：<code>http://bin.webduino.io/susih/edit?html,js,output</code></li>
</ul>
</li>
</ul>
<h3 id="2-%E7%92%B0%E5%A2%83%E5%81%B5%E6%B8%AC">2. 環境偵測</h3>
<h4 id="21-%E6%BA%AB%E6%BF%95%E5%BA%A6%E5%81%B5%E6%B8%AC">2.1. 溫濕度偵測</h4>
<ul>
<li>
<p>溫濕度偵測
溫濕度傳感器是接收外界環境變數最基本的傳感器，透過溫濕度傳感器，可以準確的偵測溫度與溼度的即時變化，若再搭配一些樣式表、圖表工具或後端資料庫，就可以整合成為非常有用的數據收集應用。</p>
</li>
<li>
<p>接線與實作
溫濕度傳感器有四支針腳，格子狀的一面面朝自己，左邊數來第一支針腳為 v (接 3.3V)，第二支為 data (接 5)，第三支沒有作用，第四支為 GND。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212101404.png" alt="溫濕度傳感器腳位介紹"></p>
<p>因為溫濕度的針腳較細，如果使用杜邦線連接會鬆脫，可使用麵包板進行連接。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212101422.png" alt="Webduino Smart 與溫濕度傳感器接線圖"></p>
</li>
<li>
<p>Webduino Blockly 操作解析
在畫面中放入開發板積木，開發板下拉選單選擇「Smart」，連線方式選擇「Wi-Fi」，填入 Device ID，在開發板內放入溫濕度傳感器的積木，腳位設定 5。</p>
<blockquote>
<p>取得 Device ID、使用 IP 來進行 WebSocket 操控，請參考：<a href="https://tutorials.webduino.io/zh-tw/docs/basic/board/smart-setup.html">Webduino Smart(初始化設定)</a></p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212104618.png" alt="20210212104618"></p>
<p>放入使用溫濕度傳感器偵測的積木，設定為每 1000 毫秒 (1 秒) 偵測一次，並用網頁互動測試區的「顯示文字」顯示偵測到的數值，透過下拉選單可以選擇偵測溫度或是濕度，溫度單位為「攝氏幾度」，濕度則是「百分比」。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212104830.png" alt="顯示溫濕度傳感器偵測數值"></p>
<p>如果要同時顯示溫濕度，可以使用「建立字串」的積木來組合字串，一開始建立字串積木預設只有兩個缺口，透過點選藍色小齒輪，增加缺口的數量。</p>
<blockquote>
<p>建立字串、文字積木在「基本功能 &gt; 文字」目錄裡。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212104908.png" alt="增加顯示字串"></p>
<p>增加了缺口後，在缺口內填入對應的文字以及偵測到的溫濕度，如果需要換行，可輸入<br/>就可以換行。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212104939.png" alt="溫濕度傳感器顯示設定"></p>
<p>同時也可以指定顯示文字的大小、行高的設定。</p>
<p>如果要使用文字大小、行高的積木，必須先打開「網頁互動測試區」，下拉選單選擇「顯示文字」，相關功能就會出現在左側「顯示文字」的目錄內。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212105020.png" alt="設定文字行高與大小"></p>
<p>填入裝置 Device ID，確認開發板上線，點選右上方紅色按鈕執行，就可以開始偵測環境的溫濕度了。</p>
<blockquote>
<p>如果偵測到的數值顯示 undefined，表示溫濕度接觸不良，通常稍微調整接觸的針腳即可解決。
範例解答：<code>https://goo.gl/O3ueY3</code></p>
</blockquote>
</li>
<li>
<p>相關參考</p>
<ul>
<li>範例解答：<code>https://goo.gl/O3ueY3</code></li>
<li>完整程式碼：<code>http://bin.webduino.io/yetita/edit?html,js,output</code></li>
<li>其他溫濕度教學文：<a href="https://tutorials.webduino.io/zh-tw/docs/basic/sensor/dht.html">溫濕度</a></li>
</ul>
</li>
</ul>
<h3 id="3-%E7%84%A1%E7%B7%9A%E6%84%9F%E6%87%89">3. 無線感應</h3>
<h4 id="31-rfid">3.1. RFID</h4>
<p>RFID 是 Radio Frequency IDentification 的縮寫，中文翻譯為「無線射頻辨識」，是一種常見的無線通訊技術，透過 RFID 識別裝置 (讀卡器) 所產生的「電磁場」，能讓附著在物品上的「電子標籤」獲得能量進而發送無線電頻率的訊號，RFID 在今日相當的普及，常見於庫存、資產、人員等的追蹤與管理，甚至許多的防偽、畜產管理也都有 RFID 的身影存在。</p>
<ul>
<li>
<p>範例影片展示</p>
<div class="video-container">
  <iframe width="560" height="316" src="https://www.youtube.com/embed/RrCAOgtPHdo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</li>
<li>
<p>接線與實作
這裏我們使用的 RFID 識別裝置的型號為 RC522，RC522 主要針對 13.56MHZ 的無線電頻率識別，工作電壓為 3.3V ，上頭共有八支接腳，分別是 SDA、SCK、MOSI、MISO、IRQ、GND、RST、VCC，其中 SDA、SCK、MOSI、MISO 負責訊號的輸入和輸出。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216112203.png" alt="20210216112203"></p>
</li>
<li>
<p><font color=blue>Arduino UNO + Webduino Fly 接線方式</font>
Arduino UNO 本身的數位腳各自有各自的功能，因此我們將 SDA 接 10，SCK 接 13，MOSI 接 11，MISO 接 12，GND 接在 GND，3.3V 接在 3.3V 的位置。( IRQ 是中斷的腳位，RST 是重置的腳位，因為在本範例中不會用到，所以這裡就不需要接這兩個接腳 )
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216113252.png" alt="FLY 接線 RFID"></p>
<p>實際接線照片：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216113340.png" alt="FLY 接線 RFID"></p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216113402.png" alt="FLY 接線 RFID"></p>
</li>
<li>
<p><font color=blue>Webduino Smart 接線方式</font>
如果是使用 Webduino Smart 腳位也有對應功能，所以接線方式就把 15 接 SDA，14 接 SCK，13 接 MOSI，12 接 MISO，GND 接 GND，3.3V 接 3.3V 的位置。</p>
<blockquote>
<p>如果要使用 Smart 操控，請使用<a href="https://tutorials.webduino.io/zh-tw/docs/cloud/index.html">雲端平台</a> 更新韌體，韌體版本有 reg 標記表示有支援 RFID。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216113538.png" alt="Smart 接線 RFID"></p>
<p>實際接線照片：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216113628.png" alt="Smart 接線 RFID"></p>
</li>
<li>
<p>基本操作
打開 Webduino Blockly 編輯工具 (<code>https://blockly.webduino.io</code>)，因為這個範例會用網頁「顯示文字」來顯示偵測到的每張 RFID 磁卡卡號，所以要先打開 Webduino Blockly 的網頁互動測試區，下拉選單選擇「顯示文字」，此時在右下角會出現對應的積木功能可以選擇。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216113709.png" alt="網頁互動測試"></p>
<p>把開發板放到編輯畫面裡，填入對應的 Webduino 開發板名稱，開發板內放入 RFID 積木，名稱設定為 rfid，腳位設定為 SDA 10、SCK 13、MOSI 11、MISO 12。( 如果是 Smart 就選擇 SDA 15、SCK 14、MOSI 13、MISO 12 )</p>
<blockquote>
<p>RFID 相關的積木在「無線感應 &gt; RFID」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216113859.png" alt="RFID 積木"></p>
<p>擺入 rfid 偵測訊號的積木，透過網頁顯示偵測到的代碼。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216113935.png" alt="RFID 偵測數值"></p>
<p>填入裝置 Device ID，確認開發板上線，點選右上方紅色按鈕執行，用 RFID 磁卡去接觸感應器，就可以看到每張卡的對應的卡號了。</p>
<blockquote>
<p>執行的時候有可能會發生「腳位選錯但仍正確讀取到卡號」的狀況，這是因為 RFID 程式底層不是使用數字，而是使用 SDA、SCK、MOSI 和 MISO 操控，在積木上的腳位則是方便使用者接線識別，不過如果實際接線接錯，仍然是無法順利運作的，要特別注意。
範例解答(雲端平台)：<code>https://blocklypro.webduino.io/?demo=demo-area-01#Xxl0OpoZ81</code>
範例解答 (體驗版)：<code>https://goo.gl/FEcQvB</code></p>
</blockquote>
</li>
<li>
<p>相關參考</p>
<ul>
<li>範例解答 (雲端平台)：<code>https://blocklypro.webduino.io/?demo=demo-area-01#Xxl0OpoZ81</code></li>
<li>範例解答 ( 體驗版 )：<code>https://goo.gl/FEcQvB</code></li>
<li>範例完整程式碼：<code>http://bin.webduino.io/lutal/edit?html,js,output</code></li>
</ul>
</li>
</ul>
<h2 id="webdunio-%E7%B3%BB%E5%88%97%E9%96%8B%E7%99%BC%E6%9D%BF">Webdunio 系列開發板</h2>
<ul>
<li>
<p>產品
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211162314.png" alt="20210211162314"></p>
</li>
<li>
<p>Webduino 控制：一對一、多對一、一對多
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211162419.png" alt="20210211162419"></p>
</li>
</ul>
<h2 id="webduino-%E4%B8%89%E5%A4%A7%E9%9B%B2%E7%AB%AF%E5%B9%B3%E5%8F%B0">Webduino 三大雲端平台</h2>
<ul>
<li>
<p>Blockly 體驗版
<a href="https://blockly.webduino.io"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211165028.png" width="400px" height="300px"></a></p>
<blockquote>
<p>不用註冊、就可使用</p>
</blockquote>
</li>
<li>
<p>Blockly 模擬器
<a href="https://simulator.webduino.io/"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211165135.png" width="400px" height="300px"></a></p>
<blockquote>
<p>不用註冊、就可使用</p>
</blockquote>
</li>
<li>
<p>Blockly 雲端平台
<a href="https://cloud.webduino.io"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210211165213.png" width="400px" height="300px"></a></p>
<blockquote>
<p>需註冊、功能最完整</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>Webdunio Bit 教育版 與 Micro Bit 相仿功能</p>
</blockquote>
<h2 id="webduino-smart">Webduino Smart</h2>
<h3 id="1-%E7%A1%AC%E9%AB%94%E4%BB%8B%E7%B4%B9">1. 硬體介紹</h3>
<ul>
<li>
<p>Webduino Smart (介紹)</p>
<p>Webduino Smart 是 2016 年推出的物聯網開發板，有別於過去馬克 1 號和 Fly 需要搭配 Arduino 才能運作，Smart 可以自行獨立運作，同時也具備連上網際網路 ( Internet ) 和透過區域網路 ( WebSocket ) 操控的能力，相信更能有效地應用在物聯網的開發和各種創意上！</p>
</li>
<li>
<p><a href="https://tutorials.webduino.io/zh-tw/docs/basic/board/smart-setup.html">Webduino Smart(初始化設定)</a></p>
<iframe width="560" height="316" src="https://www.youtube.com/embed/b-7B5fljwG4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>第一次雲端更新 + 取得 Device ID：</p>
<iframe width="560" height="316" src="https://www.youtube.com/embed/UtY4O5T7JgE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<hr>
<ol>
<li>
<p><strong>接上電源，輸入 Wi-Fi 帳號密碼連線</strong>
和馬克一號與 Fly 同樣的第一步驟，就是設定 Wi-Fi 的帳號密碼，不過不同的是，設定完帳號密碼後，我們就可以讓 Smart 純粹透過 WebSocket 走區域網路連線，不需要連到外部的網路環境也能運作，如果想要連線到外部網路環境 ( Internet )，也因為設定了 Wi-Fi 帳密，就可以順利連接到網際網路了。</p>
<p>第一步就是接上電源，這時候在具備 Wi-Fi 功能的電腦、筆電或行動裝置的 Wi-Fi 搜尋裡，就可以看到有個名為「Smart」的裝置，此時開發板會閃紅燈，接著紅燈恆亮，這是正常的狀況，因為開發板尚未連線至區域網路。( 不過如果你已經照著接下來的步驟設定完成，還是一樣紅燈恆亮應該就是設定錯誤或不正常了 )</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-01.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-01_s.jpg' class="nofancybox  img-center" /></a></p>
<p>點選 <code>smart</code> 後輸入預設密碼 <code>12345678</code>，進行連線。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-02.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-02_s.jpg' class="nofancybox  img-center" /></a></p>
<p>有與 <code>smart</code> 裝置構成連線的畫面
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-02-1.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-02-1_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>設定 Wi-Fi 帳號密碼與顯示名稱
連線後打開瀏覽器 ( 建議使用 Chrome )，網址列輸入 192.168.4.1，進入設定畫面後設定裝置在 Wi-Fi 搜尋中所顯示的名稱和密碼 ( 避免別人用 12345678 也可以連結到你的裝置 )，Device ID 的部分會在進行第一次韌體更新後配發 ( 下面的步驟會介紹 )，每塊 Smart 會配發唯一的一個 ID，因此您無法填寫與修改。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-031.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-031_s.jpg' class="nofancybox  img-center" /></a></p>
<p>Wi-Fi 頁籤就可以設定的所在場所的 Wi-Fi SSID 與 PWD，此處可以設定三組 SSID 和 PWD，在不同場域會自動切換。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-032.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-032_s.jpg' class="nofancybox  img-center" /></a></p>
<p>設定完成後就可以按下 SUBMIT 儲存，出現 Save OK 的字樣表示儲存成功，此時 Smart 開發板會重啟並閃爍紅燈，當紅燈熄滅，且綠燈亮起一次之後，表示 Smart 開發板已經成功連結上家裡或環境內的 Wi-Fi 基地台。( 若紅燈持續閃爍或恆亮，請移除電源，重新操作步驟 1 與步驟 2 )</p>
<blockquote>
<p>初次使用的用戶，務必在成功連線後，連線 <code>Internet</code> 更新韌體，取得 <code>Device ID</code>。</p>
</blockquote>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-04.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-04_s.jpg' class="nofancybox  img-center" /></a></p>
<p><strong>更新韌體</strong>
<code>Smart</code> 由關機狀態接通電源，亮紅燈時按住小按鍵(不放)-&gt;轉成綠燈(不放)-&gt;綠燈熄滅-&gt;放開按鍵-&gt;藍燈-&gt;開始更新，勿關電源。等候更新完成，<code>Smart</code> 會重新開機。這是第 1 次韌體更新。</p>
<p>電腦瀏覽器輸入 <code>192.168.4.1</code> 連到 <code>Smart</code>，看到如下畫面，已經有<code>Device ID</code>。至此更新步驟完成。</p>
</li>
<li>
<p>獲得區域網路 IP
設定儲存完成後，移除開發板電源，重新接上開發板電源，這時開發板會開始閃紅燈，和區域網路連線後就會亮起綠燈，一秒後綠燈會消失 ( 若紅燈持續閃爍或亮紅燈，請返回步驟一重新設定 )，此時我們可以在電腦或行動裝置的 Wi-Fi 搜尋裡，看到「我們自訂的名稱_192.168.XXX.XXX 」，以下方的例子來說就是「COOL_192.168.0.230」，記下後面這個 IP 數字，透過這個 IP 我們就可以用 WebSocket 來連線控制了。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-05.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-05_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
</ol>
</li>
<li>
<p>預設元件和腳位介紹</p>
<p>Webduino Smart 是一塊長 3 公分寬 2.5 公分的開發板，重量約 85 公克，腳位有數位腳 ( 0、2、4、5、12、13、14、15、16 )，PWM 腳位 ( 12、13、15 )，類比腳 AD ( A0 )，其他腳位 TX、RX、3.3V、VCC、RST 和 GND 各 1 個。</p>
<p>開發板內建一個光敏電阻、一個三色燈和一個微型按鈕開關，其中 AD 腳位預設供給光敏電阻使用，三色 LED 燈的紅色使用 15 號腳、綠色使用 12 號腳、藍色使用 13 號腳 ( 三色 LED 燈為「共陰」，在官網其他範例外接的三色 LED 為「共陽」 )，而一個微型按鈕開關則使用了 4 號腳位，使用的時候要特別注意。</p>
</li>
<li>
<p>腳位圖
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-01.png" alt=" "></p>
</li>
<li>
<p>外觀介紹</p>
<ol>
<li>
<p>大小對照 ( 左邊是四號電池和三號電池 )：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209115523.png" alt="20210209115523"></p>
</li>
<li>
<p>360 度照片：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209115543.png" alt="20210209115543"></p>
</li>
</ol>
</li>
</ul>
<h3 id="2-webduino-smart-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%BD%B1%E7%89%87">2. Webduino Smart 初始化影片</h3>
<ul>
<li>
<p>初始化設定步驟</p>
<div class="video-container">
  <iframe width="560" height="316" src="https://www.youtube.com/embed/b-7B5fljwG4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</li>
<li>
<p>第一次雲端更新 + 取得 Device ID：</p>
<div class="video-container">
  <iframe width="560" height="316" src="https://www.youtube.com/embed/UtY4O5T7JgE" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</li>
<li>
<p>Webduino Smart 初始化步驟說明</p>
</li>
</ul>
<ol>
<li>
<p><font color='blue'>接上電源，輸入 Wi-Fi 帳號密碼連線</font></p>
<p>和 <code>馬克一號</code> 與 <code>Fly</code> 同樣的第一步驟，就是設定 <code>Wi-Fi</code> 的帳號密碼，不過不同的是，設定完帳號密碼後，我們就可以讓 <code>Smart</code> 純粹透過 <code>WebSocket</code> 走區域網路連線，不需要連到外部的網路環境也能運作，如果想要連線到外部網路環境 (Internet)，也因為設定了 Wi-Fi 帳密，就可以順利連接到網際網路了。
<br></p>
<p>第一步就是接上電源，這時候在具備 Wi-Fi 功能的電腦、筆電或行動裝置的 Wi-Fi 搜尋裡，就可以看到有個名為「Smart」的裝置，此時<font color=red>開發板會閃紅燈，接著紅燈恆亮</font>，這是正常的狀況，因為開發板尚未連線至區域網路。( 不過如果你已經照著接下來的步驟設定完成，還是一樣紅燈恆亮應該就是設定錯誤或不正常了 )</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-01.jpg" alt="Webduino Smart 初始化"></p>
<p>點選後輸入預設密碼 <font color=orange>12345678</font>，進行連線。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-02.jpg" alt="Webduino Smart 初始化"></p>
</li>
<li>
<p><font color='blue'>設定 Wi-Fi 帳號密碼與顯示名稱</font>
連線後打開瀏覽器 (建議使用 Chrome)，網址列輸入 <font color=orange>192.168.4.1</font>，進入設定畫面後設定裝置在 Wi-Fi 搜尋中所顯示的名稱和密碼 (避免別人用 12345678 也可以連結到你的裝置)，Device ID 的部分會在進行第一次韌體更新後配發 (下面的步驟會介紹)，每塊 Smart 會配發唯一的一個 ID，因此您無法填寫與修改。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-031.jpg" alt="Webduino Smart 初始化"></p>
<p>Wi-Fi 頁籤就可以設定的所在場所的  <font color=orange>Wi-Fi SSID 與 PWD</font>，此處可以設定三組 SSID 和 PWD，在不同場域會自動切換。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-032.jpg" alt="Webduino Smart 初始化"></p>
<p>設定完成後就可以按下 SUBMIT 儲存，出現 <strong>Save OK</strong> 的字樣表示儲存成功，此時 Smart 開發板會 <font color=orange>重啟並閃爍紅燈，當紅燈熄滅，且綠燈亮起一次之後</font>，表示 Smart 開發板已經成功連結上家裡或環境內的 Wi-Fi 基地台。(若紅燈持續閃爍或恆亮，請移除電源，重新操作步驟 1 與步驟 2)</p>
<blockquote>
<p>初次使用的用戶，務必在成功連線後，連線 Internet 更新韌體，取得 Device ID。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-04.jpg" alt="Webduino Smart 初始化"></p>
</li>
<li>
<p><font color='blue'>獲得區域網路 IP</font>
設定儲存完成後，移除開發板電源，重新接上開發板電源，這時開發板會開始閃紅燈，和區域網路連線後就會亮起綠燈，一秒後綠燈會消失 ( 若紅燈持續閃爍或亮紅燈，請返回步驟一重新設定 )，此時我們可以在電腦或行動裝置的 Wi-Fi 搜尋裡，看到「<font color=orange>我們自訂的名稱_192.168.XXX.XXX</font>」，以下方的例子來說就是「COOL_192.168.0.230」，記下後面這個 IP 數字，透過這個 IP 我們就可以用 WebSocket 來連線控制了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-05.jpg" alt="Webduino Smart 初始化"></p>
</li>
<li>
<p><font color='blue'>打開 Webduino Blockly 進行測試</font>
打開 Webudino Blockly (<code>http://blockly.webduino.io</code>，如果是使用 WebSocket 連線，<font color=orange>網址開頭必須為 http 不能是 https</font>，要特別注意！)，放入開發板的積木，種類選擇 Smart，連線方式選擇 WebSocket，然後填入剛剛的 IP，接著放入三色 LED 燈的積木 ( 使用<font color=orange>三色共陰</font>)，紅色設定 15，綠色 12，藍色 13，並設定三色 LED 燈的顏色為紅色。( 欲使用 Device ID 控制請看步驟五與步驟六 )</p>
<blockquote>
<p>Webduino Blockly：<code>http://blockly.webduino.io</code>
Webduino Blockly 教學：<a href="https://tutorials.webduino.io/zh-tw/docs/basic/blockly/blockly-tutorial-01.html">Webduino Blockly 基本功能</a>、<a href="https://tutorials.webduino.io/zh-tw/docs/basic/blockly/blockly-tutorial-02.html">Webduino Blockly 進階功能</a></p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-06.png" alt="Webduino Smart 連線"></p>
<p>點選執行，就可以看到 Smart 開發板上頭的三色燈發出紅色光了。</p>
<blockquote>
<p>解答：<code>http://blockly.webduino.io/#-KbJUDpxOP4DtqhWwR82</code></p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-07.gif" alt="Webduino Smart 連線"></p>
</li>
<li>
<p><font color='blue'>- 連線 Internet 更新韌體</font>
Webduino Smart 有個很方便的特色功能，當我們透過步驟 1 到步驟 3 初始化設定成功後，就可以連上 Internet 進行遠端更新，方便大家獲取最新的韌體功能，更新的方式很簡單，在步驟 3 接上電源後，按住 Micro USB 旁的微型按鈕開關 ( 按住不放 )。</p>
<p>注意！如果先按住按鈕，再接電源，會讓 Smart 回復出廠設定，如果回復出廠設定，Wi-Fi SSID 和密碼都必須重新設定。</p>
<p>按按鈕更新韌體，只是讓基本功能的更新與提升開發板效能更為便利，如果要取得最新版本的韌體，必須透過<font color=orange>雲端平台</font>進行更新。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-08.jpg" alt="Webduino Smart 更新"></p>
<p>按住<font color=orange>直到綠燈亮起後，再放開按鈕開關，此時藍色燈會亮起 ，表示開始下載更新檔</font>，下載完成後完成後藍色燈會熄滅，開始進行更新 ( 約 5~10 秒 )，更新完成後紅色燈會亮起，接著會閃紅燈進行連線，連線成功後綠色燈會亮起，當綠燈熄滅，表示我們可以重新開始控制開發板。 (<font color=orange>注意！進行更新的 5~10 秒請勿移除電源，否則可能會造成更新失敗而無法啟用開發板的狀況</font>)
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-09.jpg" alt="Webduino Smart 更新"></p>
<p>更新完成後可再參考「步驟 1」，透過 192.168.4.1 進入設定頁面，就可以看到版本號已經更新，同時也出現 Device ID 了。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-10.jpg" alt="Webduino Smart 更新"></p>
<p>更新後的 Smart，<font color=orange>預設三分鐘後會關閉 Wi-Fi AP 功能</font>(無法在 Wi-Fi 搜尋清單中看到 )，若要持續顯示在 Wi-Fi 清單裡，可勾選 Always enable WiFi AP。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-12.jpg" alt="Webduino Smart 更新"></p>
</li>
<li>
<p><font color='blue'>使用 Device ID 控制</font>
當我們已經透過步驟 5 的遠端更新取得 Device ID，如果不想用 WebSocket 操控，亦可用這組 Device ID 來控制，控制的方法就和 Webduino 馬克一號與 Webduino Fly 一樣，連線方式選擇 Wi-Fi，填入 Deivce ID 就可以操控。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-setup-11.jpg" alt="Webduino Smart Wifi"></p>
</li>
</ol>
<h3 id="3-smart-%E6%87%89%E7%94%A8">3. Smart 應用</h3>
<h4 id="31-%E8%87%AA%E8%B5%B0%E8%BB%8A">3.1. 自走車</h4>
<ul>
<li>
<p>組裝
Smart 自走車是 Webduino 自主研發的產品，專為 Smart 開發板量身打造，輕巧、方便又環保！不僅能 DIY 動手玩創意，還能輕鬆學習程式邏輯概念，實作出一台具個人特色的自走車。</p>
</li>
<li>
<p>展示影片
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209112838.png" alt="展示影片"></p>
</li>
<li>
<p>接線與實作</p>
<ul>
<li>
<p>所需材料列表：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209112928.png" alt="Smart 自走車材料"></p>
</li>
<li>
<p>將杜邦線從木板的長方形鏤空處穿出（照片以左側馬達固定版為例）
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209113001.png" alt="組合馬達與木板"></p>
</li>
<li>
<p>將減速馬達平整面貼緊木板，圓點凸出面朝外，插入螺絲 2.螺絲尾端以螺母固定，指尖頂住螺母並拴緊螺絲
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209113352.png" alt="拴入螺絲"></p>
</li>
<li>
<p>左右馬達固定板完成圖示
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209113428.png" alt="馬達固定板完成"></p>
</li>
<li>
<p>將馬達固定板沿較長軌道滑入
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209113500.png" alt="與木板組裝"></p>
</li>
<li>
<p>插入木頭卡榫固定，並安裝大輪子到馬達兩側
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209113528.png" alt="插入木頭卡榫"></p>
</li>
<li>
<p>自走車頂板正、反面
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209113551.png" alt="自走車頂板正反面"></p>
<p>1.將三角頂板轉至反面，定向輪對準孔位並插入螺絲 2.正面用指尖頂住螺母，將螺絲旋緊 3.定向輪組裝完成圖
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209113627.png" alt="定向輪組裝"></p>
</li>
<li>
<p>杜邦線穿入三角頂板兩側正方形孔，將馬達固定板上緣卡榫處，對準自走車頂板兩側長方形孔位
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209113649.png" alt="組裝馬達與頂板"></p>
</li>
<li>
<p>將自走車頂板與馬達固定板卡榫處，向前推到底並插入木頭卡榫固定，插入木頭卡榫固定
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209113714.png" alt="組合馬達固定板與頂板"></p>
<p>1.插入固定板 2.頂板上方插入四片小積木 3.將馬達驅動板放入自走車頂部
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209113814.png" alt="插入固定板及馬達驅動板"></p>
</li>
<li>
<p>要操控 Smart 自走車，組裝玩車體之後，需要裝上雙馬達驅動板及 Smart 開發板，再接上電源才可運作。
馬達、馬達驅動板及 Smart 開發板接線示意圖：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209113850.png" alt="接線示意圖"></p>
<ul>
<li>A 線 ( 馬達右上 ) → 馬達驅動板 B2 → Smart 腳位 14</li>
<li>B 線 ( 馬達右下 ) → 馬達驅動板 B1 → Smart 腳位 16</li>
<li>C 線 ( 馬達左上 ) → 馬達驅動板 A1 → Smart 腳位 2</li>
<li>D 線 ( 馬達左下 ) → 馬達驅動板 A2 → Smart 腳位 5</li>
<li>馬達驅動板 + 號 → Smart 3.3V 腳位</li>
<li>馬達驅動板 - 號 → Smart GND 腳位</li>
</ul>
</li>
<li>
<p>實際接線照片：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209114000.png" alt="接線照片"></p>
</li>
<li>
<p>馬達、馬達驅動板及 Smart 開發板接線完成照片：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209114023.png" alt="接線照片"></p>
<p>以上是 Smart 自走車的組裝步驟，接下來就可以透過 Webduino Blockly 來輕鬆玩轉自走車囉！</p>
</li>
</ul>
</li>
<li>
<p>相關參考</p>
<blockquote>
<p>Smart 自走車操控教學： <a href="https://tutorials.webduino.io/zh-tw/docs/useful/example/smart-robot-car-remote-control.html">Smart 自走車鍵盤操控</a></p>
</blockquote>
</li>
</ul>
<h4 id="32-%E8%87%AA%E8%B5%B0%E8%BB%8A%E7%B6%B2%E9%A0%81%E9%81%99%E6%8E%A7%E5%99%A8%E6%93%8D%E6%8E%A7">3.2. 自走車(網頁遙控器操控)</h4>
<ul>
<li>
<p>操作解析</p>
<p>打開 <code>Webduino</code> 雲端平台，並選擇 <a href="https://blocklypro.webduino.io/">Blockly 編輯工具</a>，你可以建立一個積木程式專案，並命名為 Smart 自走車 (網頁遙控器操控)。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209144620.png" alt="建立專案"></p>
<blockquote>
<p>使用雲端平台之前須先註冊並登入，首次註冊教學請點此：<a href="https://tutorials.webduino.io/zh-tw/docs/cloud/basic/cloud-register.html">註冊與登入</a></p>
</blockquote>
</li>
<li>
<p>Webduino Blockly 操作解析</p>
<p>接著會進入 Blockly 畫面，打開網頁互動測試區，下拉選單選擇「遙控器」，就會帶出一個網頁遙控器，當完成積木操控程式，就可以用行動裝置打開這個遙控器。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209144714.png" alt="網頁遙控器"></p>
<p>首先放入開發板及自走車的積木，開發板設定為 Smart，自走車名稱命名為 car，腳位設定右前 14、右後 16、左前 2、左後 5。</p>
<blockquote>
<p>開發板設定積木在「開發板控制 &gt; 開發板」目錄下。
自走車的積木在「玩具及馬達 &gt; 自走車」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209144744.png" alt="自走車積木"></p>
<p>使用「遙控器按鍵按下」的積木，設定按住向上的圖案時，自走車會往前移動，如果放開就會停止。</p>
<blockquote>
<p>遙控器積木在「遙控器」目錄下。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209144811.png" alt="網頁遙控器控制自走車"></p>
</blockquote>
<p>依序把前進、後退、左轉與右轉的行為放入遙控器的動作裡。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209144830.png" alt="網頁遙控器控制自走車"></p>
<p>填入 <code>Smart</code> 開發板 <code>Device ID</code>，確認開發板上線，點選右上方紅色按鈕執行，就可以用網頁裡的遙控器操控自走車了。</p>
<blockquote>
<p>範例解答：<code>https://blocklypro.webduino.io/#7ggDlVjoPn</code></p>
</blockquote>
</li>
<li>
<p>行動裝置操控</p>
<p>如果想透過行動裝置 ( 手機或平板，Android / IOS 皆可 )，只需點選上方「產生即時預覽 QRCode 的按鈕」，點選後會彈出一個 QRCode。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209145330.png" alt="Blockly 產生 QRCode"></p>
<p>用行動裝置掃描 QRCode，就會打開遙控器的網頁，剛剛所做的積木程式會直接在這個網頁裡執行，也就可以用行動裝操控 Smart 自走車了。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209145403.png" alt="手機遙控器"></p>
</li>
<li>
<p>進階功能</p>
<p>為了發揮行動裝置的功能，凸顯行動裝置和電腦的差異，這邊要來偵測行動裝置的陀螺儀和加速度計，這樣我們就能夠偵測行動裝置的旋轉、翻轉與加速度。在畫面中多綁定一個遙控器事件，當按下中間圓型小點的按鈕，就可以啟動偵測行動裝置陀螺儀的功能，反之放開就取消這功能。</p>
<blockquote>
<p>行動裝置偵測的積木在「進階功能 &gt; 行動裝置」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209145617.png" alt="手機陀螺儀與加速度控制自走車"></p>
<p>在偵測旋轉翻轉的區塊內，放入邏輯判斷，判斷三個情形：前後翻轉角度大於 20 ( 表示手機往前翻 )，前後翻轉角度小於 -20 ( 表示手機往後翻 )，以及前後翻轉角度在 -20~20 的區間。</p>
<blockquote>
<p>邏輯相關積木在「基本功能 &gt; 邏輯」目錄下，數字的積木在「基本功能 &gt; 數學式」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209145753.png" alt="手機翻轉控制自走車"></p>
<p>在第一個判斷條件內放入判斷左右翻轉的第二層邏輯，目的在偵測手機是往左前、右前還是正前方翻轉。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209145812.png" alt="手機翻轉控制自走車"></p>
<p>後面兩個判斷式依此類推，這樣就可以完成手機翻轉時，自走車也會跟著動作的邏輯程式。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209145841.png" alt="手機翻轉控制自走車"></p>
<p>同樣的，點選上方產生即時預覽的 QRCode 按鈕，產生 QRCode，透過行動裝置掃描，就可以使用行動裝置的陀螺儀操控自走車了。( 記得要按住中間原點的黑色按鈕 )</p>
<blockquote>
<p>範例解答：<code>https://blocklypro.webduino.io/?demo=demo-area-09#71EN9LPn2x</code></p>
</blockquote>
</li>
<li>
<p>相關參考</p>
<ul>
<li>組裝步驟：Smart 自走車 (組裝步驟)</li>
<li>範例解答：Smart 自走車 (網頁遙控器操控)</li>
<li>範例解答：Smart 自走車 (手機陀螺儀操控)</li>
<li>完整程式碼：<a href="https://bin.webduino.io/toxip/edit?html,css,js,output">https://bin.webduino.io/toxip/edit?html,css,js,output</a></li>
</ul>
</li>
</ul>
<h4 id="33-%E8%87%AA%E8%B5%B0%E8%BB%8A%E8%B6%85%E9%9F%B3%E6%B3%A2%E9%81%BF%E9%9A%9C">3.3. 自走車(超音波避障)</h4>
<h4 id="331-%E6%8E%A5%E7%B7%9A%E8%88%87%E5%AF%A6%E4%BD%9C">3.3.1 接線與實作</h4>
<p>因為<strong>超音波傳感器</strong>與自走車上的<strong>雙馬達驅動板</strong>，同時都會用到 <code>GND</code> 的腳位，所以使用麵包板來連接，超音波 <code>VCC</code> 接 <code>Smart</code> 開發板的 <code>VCC</code> 腳位，<code>Trig</code> 接 <code>13</code>，<code>Echo</code> 接 <code>15</code>，超音波傳感器的 <code>GND</code> 與馬達驅動板的一號針腳都連接到 Smart 開發板的 <code>GND</code> 腳位。</p>
<ul>
<li>
<p>接線示意圖
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209150739.png" alt="Webduino Smart 自走車"></p>
</li>
<li>
<p>實際接線照片：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209150808.png" alt="超音波避障實際接線照片"></p>
</li>
</ul>
<h4 id="332-%E6%93%8D%E4%BD%9C%E8%A7%A3%E6%9E%90">3.3.2. 操作解析</h4>
<p>打開 <code>Webduino</code> 雲端平台，並選擇 <a href="https://blocklypro.webduino.io/">Blockly 編輯工具</a>，你可以建立一個積木程式專案，並命名為 <code>Smart 自走車(超音波避障)</code>。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209151334.png" alt="建立專案"></p>
<blockquote>
<p>使用雲端平台之前須先註冊並登入，首次註冊教學請點此：<a href="https://tutorials.webduino.io/zh-tw/docs/cloud/basic/cloud-register.html">註冊與登入</a></p>
</blockquote>
<h4 id="333-webduino-blockly-%E6%93%8D%E4%BD%9C%E8%A7%A3%E6%9E%90">3.3.3. Webduino Blockly 操作解析</h4>
<p>進入專案 <code>Blockly</code> 畫面，打開網頁互動區域，因為這個範例將會使用「顯示文字」來顯示超音波偵測到的距離。當我們選擇下拉選單選擇「顯示文字」，此時在左側積木列的最下方將會出現對應的積木功能可以選擇。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209151647.png" alt="Webduino Smart 自走車"></p>
<p>接著會進入 <code>Blockly</code> 畫面，在畫面中放入開發板積木，開發板下拉選單選擇「Smart」，連線方式選擇「Wi-Fi」，填入 <code>Device ID</code>，在開發板內放入自走車積木，腳位設定右前 <code>14</code>、右後 <code>16</code>、左前 <code>2</code>、左後 <code>5</code>。再放入超音波傳感器積木，<code>Trig</code> 腳位設定 <code>13</code>，<code>Echo</code> 腳位設定 <code>15</code>。</p>
<blockquote>
<p>自走車積木在「玩具及馬達 &gt; 自走車」目錄下。
超音波傳感器的積木在「環境偵測 &gt; 超音波」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209151714.png" alt="超音波腳位設定"></p>
<p>放入 <code>ultrasonic</code> 擷取距離的積木，設定每 <code>1200 毫秒</code> (1.2 秒) 偵測一次，並且透過「顯示」積木將距離數值顯示在網頁上。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209151810.png" alt="顯示偵測距離"></p>
<h4 id="334-%E5%AF%A6%E4%BD%9C%E9%81%BF%E9%9A%9C%E8%BB%8A%E7%A8%8B%E5%BC%8F">3.3.4. 實作避障車程式</h4>
<p>有了距離之後可以使用「邏輯」積木做到自動避障，將邏輯積木放到 ultrasonic 擷取距離的積木內，點擊藍色小齒輪，設定兩個邏輯判斷。</p>
<blockquote>
<p>邏輯積木在「基本功能 &gt; 邏輯」目錄下。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209151910.png" alt="邏輯判斷小齒輪操作"></p>
</blockquote>
<p>透過邏輯判斷，設定與障礙物的距離，當超音波偵測的距離小於 <code>10</code> 公分，意味著自走車與障礙物的距離很近。</p>
<blockquote>
<p>大於小於的積木在「基本功能 &gt; 邏輯」目錄下。
數字積木在「基本功能 &gt; 數學式」目錄下。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209151935.png" alt="偵測距離遠近判斷"></p>
</blockquote>
<p>開始設定自走車的行進方向，當偵測到的距離小於 10 公分的時候，自走車向後退 1 秒鐘，接著向右轉 1 秒鐘；當偵測到與前方障礙物的距離大於 10 公分，開始直線前進。</p>
<blockquote>
<p>等待的積木在「進階功能 &gt; 等待」目錄下。
自走車積木在「玩具及馬達 &gt; 自走車」目錄下。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209152022.png" alt="避障車程式"></p>
</blockquote>
<p>最後，我們將使用到「流程」積木，將自動避障程式碼加入流程中。</p>
<blockquote>
<p>流程，程式碼裡就是 function，在寫程式的時候，常常會遇到需要重複執行的程式碼，為避免過多程式碼重複出現，我們可以設定一個流程，並將「需要被重複執行的程式碼」寫進這個流程中，如此一來，當我們需要重複用到這些程式碼的時候，只要呼叫這段流程，就可以重複執行對應的程式。</p>
</blockquote>
<p>相關教學參考：<a href="https://tutorials.webduino.io/zh-tw/docs/blockly/standard/functions.html">流程</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209152154.png" alt="加入流程的避障車程式"></p>
<p>將自走車一開始的狀態設定為「停止」，讓程式開始執行後自走車停止 1 秒，開始執行避障功能。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209152257.png" alt="自走車最初停止狀態"></p>
<p>以上是自動避障車的實行步驟，做好之後，填入裝置 Device ID，確認開發板上線，點選右上方紅色按鈕執行，就可以體驗無人車的威力囉！</p>
<blockquote>
<p>範例解答：<code>https://blocklypro.webduino.io/?demo=demo-area-01#XBBq1x4ozE</code></p>
</blockquote>
<h4 id="335-%E7%9B%B8%E9%97%9C%E5%8F%83%E8%80%83">3.3.5. 相關參考</h4>
<ul>
<li>範例解答：<code>https://blocklypro.webduino.io/?demo=demo-area-01#XBBq1x4ozE</code></li>
<li>完整程式碼：<code>https://bin.webduino.io/daqik/edit?html,css,js,output</code></li>
</ul>
<h3 id="34-smart-%E8%87%AA%E8%B5%B0%E8%BB%8A%E6%BA%AB%E6%BF%95%E5%BA%A6%E6%84%9F%E6%B8%AC%E8%BB%8A">3.4 Smart 自走車(溫濕度感測車)</h3>
<ul>
<li>
<p>接線與實作</p>
<p>溫濕度傳感器有四隻針腳，第一隻針腳為 v(接 VCC)，第二隻為 data(接 12)，第三隻沒有作用，為 N/C，第四隻為 GND(接 GND)。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209153100.png" alt="溫濕度傳感器"></p>
<p>因為溫濕度傳感器與自走車上的雙馬達驅動板，同時都會用到 <code>GND</code> 的腳位，所以使用麵包板來連接，溫濕度 <code>VCC</code> 接 <code>Smart 開發板</code> 的 <code>VCC</code> 腳位。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209220646.png" alt="溫濕度感測車接線示意圖">
實際接線照片：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209153134.png" alt="溫濕度感測車"></p>
</li>
<li>
<p>操作解析</p>
<p>打開 Webduino 雲端平台，並選擇 <a href="https://blocklypro.webduino.io/">Blockly 編輯工具</a>，你可以建立一個積木程式專案，並命名為 Smart 自走車 (溫濕度感測車)。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209153304.png" alt="新增專案"></p>
<blockquote>
<p>使用雲端平台之前須先註冊並登入，首次註冊教學請點此：<a href="https://tutorials.webduino.io/zh-tw/docs/cloud/basic/cloud-register.html">註冊與登入</a></p>
</blockquote>
</li>
<li>
<p>Webduino Blockly 操作解析</p>
<p>接著在畫面中放入開發板積木，開發板下拉選單選擇「Smart」，連線方式選擇「Wi-Fi」，填入 Device ID，在開發板內放入自走車積木，腳位設定右前 <code>14</code>、右後 <code>16</code>、左前 <code>2</code>、左後 <code>5</code>。再放入溫濕度傳感器積木，腳位設定 <code>13</code>。</p>
<blockquote>
<p>開發板設定積木在「開發板控制 &gt; 開發板」目錄下。
自走車積木在「玩具及馬達 &gt; 自走車」目錄下。
溫濕度相關的積木在「環境偵測 &gt; 溫濕度」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209215221.png" alt="溫濕度腳位設定"></p>
</li>
<li>
<p>建立 Google 試算表</p>
<p>首先須先於個人 Google 帳號下建立試算表，接著於試算表之「共用」權限管理功能，更改試算表讀取權限，這個動作是為了讓 Blockly 有權限將溫濕度的數值寫入試算表，教學如下：</p>
<blockquote>
<p>設定 Google 試算表請參考：<a href="https://tutorials.webduino.io/zh-tw/docs/cloud/database/google-spreadsheet.html">Google 試算表(設定)</a></p>
</blockquote>
<ul>
<li>
<p>讀取資料</p>
<p>接著進入專案，將試算表的積木放入編輯畫面中，並在網址的地方，貼上之前建立的試算表網址，如果有更改工作表名稱(與試算表檔名不同)，則積木的工作表名稱也要進行修改。</p>
<blockquote>
<p>試算表積木在「資料庫 &gt; Google 試算表」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209215433.png" alt="試算表網址">
放入 dht 偵測溫濕度的積木，設定每 1000 毫秒 ( 1 秒 ) 偵測一次。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209153632.png" alt="偵測溫濕度"></p>
</li>
<li>
<p>寫入資料</p>
<p>如果想增加存入的欄位類別，比方說加入「時間」、「溫度」、「濕度」，可透過積木上的小齒輪來增減欄位。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209215703.png" alt="小齒輪教學"></p>
<blockquote>
<p>時間積木在「進階功能 &gt; 控制台」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209215824.png" alt="濕度偵測"></p>
<p>最後，輸入 Device ID，點選右上方紅色按鈕執行，回到 Google 試算表，就會看到資料依序寫入就會看到溫濕度數值囉！
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209153733.png" alt="溫濕度存取結果"></p>
<p>接著將網頁遙控器結合溫濕度紀錄，就可以一邊遙控 Smart 自走車，一邊記錄小車抵達處的溫濕度數值囉！
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210209153748.png" alt="濕度偵測"></p>
<blockquote>
<p>範例解答 ( 需登入平台 )：<code>https://blocklypro.webduino.io/?demo=demo-area-09#X33eo9P2B6</code></p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>相關參考</p>
<ul>
<li>範例解答：<code>https://blocklypro.webduino.io/?demo=demo-area-09#X33eo9P2B6</code></li>
<li>完整程式碼：`<a href="https://bin.webduino.io/xeyoh/edit?html,css,js,output">https://bin.webduino.io/xeyoh/edit?html,css,js,output</a></li>
</ul>
</li>
</ul>
<h4 id="35-smart-%E9%96%8B%E7%99%BC%E7%89%88%E8%88%87-lcd-%E8%9E%A2%E5%B9%95%E7%A1%AC%E9%AB%94%E9%80%A3%E7%B5%90">3.5. Smart 開發版與 LCD 螢幕硬體連結</h4>
<p>VCC → VCC， GND → GND ， SDA → 04 ， SCL → 05
(注意！Smart 接線只能這樣接 SDA 接 04，SCL 接 05)</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210210231005.png" alt="20210210231005"></p>
<hr>
<h2 id="%E9%A6%AC%E5%85%8B%E4%B8%80%E8%99%9F">馬克一號</h2>
<h3 id="1-%E7%A1%AC%E9%AB%94%E4%BB%8B%E7%B4%B9">1. 硬體介紹</h3>
<h3 id="2-%E9%A6%AC%E5%85%8B%E4%B8%80%E8%99%9F-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%AD%A5%E9%A9%9F%E8%AA%AA%E6%98%8E">2. 馬克一號 初始化步驟說明</h3>
<ul>
<li>
<p>初始化影片</p>
<div class="video-container">
  <iframe width="560" height="316" src="https://www.youtube.com/embed/cwzpAK_0f2I" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</li>
<li>
<p>初始化步驟說明</p>
<ul>
<li>
<p><font color="blue">將馬克一號切換為設定模式</font>
Webduino 開發板馬克一號，上面有一顆可以左右扳動的小開關，在移除電源的情況下，<font color="orange">將開關扳動至 STA 模式</font>，接上電源，就可以開始進行初始化設定。(此時開發板上的 Off-line 燈號會亮紅燈)。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/mark1-setup-01.jpg" alt=" "></p>
</li>
<li>
<p><font color="blue">使用 Wi-Fi 搜尋馬克一號</font>
使用電腦或行動裝置，打開 Wi-Fi 搜尋對應的 Webduino 開發板 SSID 名稱，點選之後輸入密碼，即可讓電腦或行動裝置與 Webduino 開發板連線，開發板的 SSID 與密碼會貼在「裝置說明書」以及開發板上，通常為「wa」開頭。(範例名稱為 wa101)
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/mark1-setup-02.jpg" alt=" "></p>
<p>我的裝置: wd2123</p>
</li>
<li>
<p><font color="blue">連線馬克一號進行設定</font>
打開 Chrome 或 Safari 瀏覽器，於網址列輸入「<code>http://192.168.4.1</code>」，即可打開 Webduino 開發板的設定頁面，在設定頁面輸入家裡、公司場所或行動裝置分享的網路基地台 SSID 與 PASSWORD。(<font color="orange">此處的 SSID 為「網路基地台」的 SSID，並非 Webduino 開發板，不要填成裝置說明卡上頭的 SSID 與 PASSWORD</font>，SSID 與 PASSWORD 限制 14 個字元，只能大小寫的英文字母與數字的組合)
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/mark1-setup-03.jpg" alt=" "></p>
<p>我的裝置:
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210210143351.png" alt="PI3-DEVICE"></p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210210143806.png" alt="20210210143806"></p>
</li>
<li>
<p><font color="blue">重啟馬克一號</font>
輸入完 SSID 與 PASSWORD 之後，點選送出，若出現「OK」的字樣，表示 Webduino 開發板已經初始化成功，並且可以和家裡、公司場所或行動裝置分享的網路基地台連線 ( 若遲遲沒有出現「OK」字樣，表示初始化設定不成功，返回步驟 1 重新開始 )，<font color="orange">完成後移除開發板電源，再將開關扳至 AP 模式</font>，重新接上電源即可進行重啟。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/mark1-setup-04.jpg" alt=" "></p>
</li>
<li>
<p><font color="blue">確認連線是否成功</font>
Webduino 開發板重啟後，便可將電腦或行動裝置切回正常的網路連線，並連結 <code>https://webduino.io/device.html</code>，輸入對應的 device 名稱確認是否連線成功，如果連線成功則會出現 OK 的顯示，連線成功後即可開始玩轉 Webduino。( 若在網頁上沒有對應 Webduino 開發板，則需重啟 Webduino 開發板或返回步驟 1 重新初始化設定)</p>
<blockquote>
<p>連線確認網址：<code>https://webduino.io/device.html</code>
Off-line 燈號判斷：紅燈熄滅 (連線成功)、紅燈恆亮 (STA 模式 或 連線失敗)、紅燈閃爍 (嘗試連線)。</p>
</blockquote>
<p>我的裝置
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210210150623.png" alt="20210210150623"></p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210210150711.png" alt="20210210150711"></p>
</li>
<li>
<p>開始操作馬克一號
進行到此步驟，表示 Webduino 馬克一號已經可以自行連上家裡、公司場所或行動裝置分享的網路基地台，並自動連結上雲端的伺服器，可以開始透過 Wi-Fi 去控制 Webduino 開發板囉！
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/connect.jpg" alt=" "></p>
<blockquote>
<p>我的馬克一號
SSIS: wd2123
PASSWORD: 12345678
Devide ID: JXeEr</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="3-%E9%A6%AC%E5%85%8B%E4%B8%80%E8%99%9F%E6%87%89%E7%94%A8">3. 馬克一號應用</h3>
<h4 id="31-%E9%A6%AC%E5%85%8B%E4%B8%80%E8%99%9F%E8%87%AA%E8%B5%B0%E8%BB%8A%E9%8D%B5%E7%9B%A4%E6%93%8D%E6%8E%A7">3.1. 馬克一號自走車(鍵盤操控)</h4>
<p>  Webduino 公仔自走車是 Webduino 自主研發的產品，使用 Webduino 馬克 1 號開發板控制，不僅可以設定行進的模式，更可以接上超音波傳感器讓車子自動閃避障礙物。在這個範例我們會實作設定電腦的鍵盤行為，透過敲打鍵盤讓車子移動。</p>
<ul>
<li>
<p>範例影片展示</p>
<div class="video-container">
   <iframe width="560" height="316" src="https://www.youtube.com/embed/0JT1KAHkMsk" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</li>
<li>
<p>接線與實作
要操控自走車，首先就是要組裝自走車，先來看一下自走車包含哪些組件，組件分別有：自走車底版 (3D列印)、左右各一顆輪子與馬達、開關、電池盒、馬達驅動板、超音波傳感器和 Webduino 開發板。由於主要的機構都已經焊接完成，組裝上變得相當簡單，只需要幾個步驟即可完成。</p>
<p>首先把電池放到電池盒內 (需要四顆三號電池)，然後將電池盒放到車子上。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225516.png" alt="放入自走車電池"></p>
<p>接著把 Webduino 開發板放到前方的插槽裡。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225540.png" alt="自走車 + 馬克一號"></p>
<p>放妥開發板後，先把超音波傳感器插在開發板的左側排插，Trig 11，Echo 10。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225605.png" alt="自走車接上超音波傳感器"></p>
<p>接著把馬達驅動板插在右側排插，注意會把 3.3V、 6、7、8、9 的腳位接滿，然後在 3.3V 的插孔處會突出一支腳，這支腳已經用電線連結出來，所以是正常的不需理會。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225632.png" alt="自走車接上馬達驅動版">
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225647.png" alt="自走車接上馬達驅動版"></p>
<p>到這邊已經組裝完成，打開自走車的電源，就可以開始嘗試操控自走車了。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225703.png" alt="自走車電源開關"></p>
<p>最終長相：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225721.png" alt="Webduino 自走車"></p>
</li>
<li>
<p>操作解析
打開 <a href="https://blockly.webduino.io">Webduino Blockly 編輯工具</a>，放入自走車的積木，名稱命名為 <code>car</code>，腳位設定右前 <code>6</code>、右後 <code>7</code>、左前 <code>8</code>、左後 <code>9</code>。</p>
<blockquote>
<p>自走車的積木在「玩具及馬達 &gt; 自走車」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225801.png" alt="自走車積木"></p>
<p>使用「開始偵測鍵盤按下」的積木，設定按住向上的箭頭時，自走車會往前移動，如果放開就會停止。</p>
<blockquote>
<p>鍵盤積木在「進階功能 &gt; 鍵盤行為」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225837.png" alt="鍵盤控制自走車移動"></p>
<p>依序把前進、後退、左轉與右轉的行為放入鍵盤的動作。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225900.png" alt="鍵盤控制自走車移動"></p>
<p>填入裝置 Device ID，確認開發板上線，點選右上方紅色按鈕執行，就可以用鍵盤操控自走車了。</p>
<blockquote>
<p>範例解答：<code>https://goo.gl/nDMS2j</code></p>
</blockquote>
<p>其實自走車的原理很簡單，因為馬達分成一左一右兩個，每個又分成往前轉和往後轉，所以可以相等於用四個 LED 來表現。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225926.png" alt="自走車原理"></p>
<p>所以如果要讓自走車前進，除了使用自走車前進的積木，也可以透過 LED on 或 off 的行為來表現。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205225953.png" alt="自走車原理"></p>
</li>
<li>
<p>相關參考</p>
</li>
<li>
<p>範例解答：<code>https://goo.gl/nDMS2j</code></p>
</li>
<li>
<p>範例完整程式碼：<code>http://bin.webduino.io/ruwun/edit?html,js,output</code></p>
</li>
</ul>
<h4 id="32-%E9%A6%AC%E5%85%8B%E4%B8%80%E8%99%9F%E8%87%AA%E8%B5%B0%E8%BB%8A%E8%A1%8C%E5%8B%95%E8%A3%9D%E7%BD%AE%E6%93%8D%E6%8E%A7">3.2. 馬克一號自走車(行動裝置操控)</h4>
<p>  Webduino 公仔自走車是 Webduino 自主研發的產品，使用 Webduino 馬克 1 號開發板控制。在這個範例我們會實作如何透過手機打開網頁，就能操控自走車，甚至還可以使用手機的陀螺儀操控。</p>
<ul>
<li>
<p>範例影片展示</p>
<div class="video-container">
  <iframe width="560" height="316" src="https://www.youtube.com/embed/b2T9SbHfHj0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</li>
<li>
<p>接線與實作
要操控自走車，首先就是要組裝自走車，先來看一下自走車包含哪些組件，組件分別有：自走車底板 (3D 列印)、左右各一顆輪子與馬達、開關、電池盒、馬達驅動板、超音波傳感器和 Webduino 開發板。由於主要的機構都已經焊接完成，組裝上變得相當簡單，只需要幾個步驟即可完成。</p>
<blockquote>
<p>詳細組裝參考：<a href="https://tutorials.webduino.io/zh-tw/docs/useful/example/toycar-keyboard.html">自走車(鍵盤操控)</a></p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205230607.png" alt="Webduino 自走車"></p>
</li>
<li>
<p>操作解析
打開 <a href="https://blockly.webduino.io">Webduino Blockly 編輯工具</a>，打開網頁互動測試區，下拉選單選擇「遙控器」，就會帶出一個網頁遙控器，待會就會用行動裝置打開這個遙控器。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205230639.png" alt="網頁遙控器"></p>
<p>放入自走車的積木，名稱命名為 car，腳位設定右前 6、右後 7、左前 8、左後 9。</p>
<blockquote>
<p>自走車的積木在「玩具及馬達 &gt; 自走車」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205230702.png" alt="自走車積木"></p>
<p>使用「遙控器按鍵按下」的積木，設定按住向上的圖案時，自走車會往前移動，如果放開就會停止。</p>
<blockquote>
<p>遙控器積木在「遙控器」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205230732.png" alt="網頁遙控器控制自走車"></p>
<p>依序把前進、後退、左轉與右轉的行為放入遙控器的動作裡。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205230747.png" alt="網頁遙控器控制自走車"></p>
<p>填入裝置 Device ID，確認開發板上線，點選右上方紅色按鈕執行，就可以用網頁裡的遙控器操控自走車了。</p>
<blockquote>
<p>範例解答：<code>https://goo.gl/GiFvlr</code></p>
</blockquote>
</li>
<li>
<p>行動裝置操控
如果要把剛剛的遙控器轉到行動裝置上面運行，只需要點選最上方「產生即時預覽 QR code」的按鈕。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205230820.png" alt="Blockly 產生 QRCode"></p>
<p>點選後會彈出一個 QRCode。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205230836.png" alt="Blockly 產生 QRCode"></p>
<p>用行動裝置掃描這個 QRCode，就會打開遙控器的網頁，剛剛所做的程式碼也會在這個網頁裡執行，也就可以用行動裝置操控自走車了。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205230858.png" alt="手機遙控器"></p>
<p>為了發揮行動裝置的功能，突顯行動裝置和電腦的差異，這邊要來偵測行動裝置的陀螺儀和加速度計，這樣我們就能夠偵測行動裝置的旋轉、翻轉與加速度。在畫面中多綁定一個遙控器事件，當按下中間圓型小點的按鈕，就可以啟動偵測行動裝置陀螺儀的功能，反之放開就取消這功能。</p>
<blockquote>
<p>行動裝置偵測的積木在「進階功能 &gt; 行動裝置」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205230919.png" alt="手機陀螺儀與加速度控制自走車"></p>
<p>在偵測旋轉翻轉的區塊內，放入邏輯判斷，判斷三個情形：前後翻轉角度大於 20 (表示手機往前翻)，前後翻轉角度小於 -20 (表示手機往後翻)，以及前後翻轉角度在 -20~20 的區間。</p>
<blockquote>
<p>邏輯相關積木在「基本功能 &gt; 邏輯」目錄下，數字的積木在「基本功能 &gt; 數學式」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205230945.png" alt="手機翻轉控制自走車"></p>
<p>在第一個判斷條件內放入判斷左右翻轉的第二層邏輯，目的在偵測手機是往左前、右前還是正前方翻轉。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231002.png" alt="手機翻轉控制自走車"></p>
<p>後面兩個判斷式依此類推，這樣就可以完成手機翻轉時，自走車也會跟著動作的邏輯程式。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231018.png" alt="手機翻轉控制自走車"></p>
<p>同樣的，點選上方產生即時預覽的 QRCode 按鈕，產生 QRCode，透過行動裝置掃描，就可以使用行動裝置的陀螺儀操控自走車了。( 記得要按住中間原點的黑色按鈕 )</p>
<blockquote>
<p>範例解答：<code>https://goo.gl/8jQU3t</code></p>
</blockquote>
</li>
<li>
<p>相關參考
範例解答：<code>https://goo.gl/8jQU3t</code>
範例完整程式碼：<code>http://bin.webduino.io/fuguq/edit?html,css,js,output</code></p>
</li>
</ul>
<h4 id="33-%E9%A6%AC%E5%85%8B%E4%B8%80%E8%99%9F%E8%87%AA%E8%B5%B0%E8%BB%8A%E5%BE%AA%E8%B7%A1%E5%8A%9F%E8%83%BD">3.3. 馬克一號自走車(循跡功能)</h4>
<p>在之前「公仔自走車」的範例中，已經了解基本的操作方式，這篇範例將利用「自走車循跡升級套件」，為自走車加上「循跡」的功能，讓我們在一般操作控制之外，也能跟隨地上的軌跡移動，甚至可藉由雲端資料庫的輔助，紀錄軌跡並重複行進同樣的路徑。</p>
<blockquote>
<p>循跡自走車操控頁面：<code>https://goo.gl/NrTrLb</code>
Webduino Blockly 範例程式：<code>https://goo.gl/8XYAam</code></p>
</blockquote>
<ul>
<li>
<p>範例影片展示</p>
<div class="video-container">
  <iframe width="560" height="316" src="https://www.youtube.com/embed/vnazkVchsp4" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</li>
<li>
<p>接線與實作
要使用循跡的功能，必須在自走車的機構安裝「循跡控制板」，如果您手邊的 Webduino 自走車為「白色的」萬向輪支架，則必須更換為 3D 列印的支架。如此一來才可以順利組合循跡控制板，<font color=orange>若自走車上頭已經是「3D 列印支架」則不用更換</font>。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231522.png" alt="更換自走車萬向輪"></p>
<p>更換的方式很簡單 ( 已是 3D 列印支架可略過組裝教學 )，首先用螺絲起子鬆開支架的小螺絲，取下支架和萬向輪，萬向輪內有四顆小鋼珠和一顆大鋼珠，千萬注意不要弄丟了 (建議可用磁鐵放在旁邊吸附著)。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231550.png" alt="自走車分解圖"></p>
<p>將 3D 列印的支架用原本的螺絲螺帽鎖到車體上，和車體並不會垂直，是正常的現象。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231610.png" alt="更換自走車萬向輪"></p>
<p>將萬向輪鎖上，車體的改造就完成了。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231632.png" alt="更換自走車萬向輪"></p>
<p>接著移除 Webduino 馬克一號原本的 Arduino Pro mini，換上循跡自走車的 Arduino Pro mini。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231649.png" alt="更換馬克一號 Arduino Pro Mini9"></p>
<p>循跡車 Arduino 背面的接線照片如下，如果不小心把線拔除了就按照顏色位置接回去即可。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231710.png" alt="循跡車 Arduino"></p>
<p>注意換完的方向要正確，五條線的接頭朝下，灰色線接頭朝上。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231728.png" alt="馬克一號更換循跡車 Arduino"></p>
<p>將馬克一號與自走車組合，五條線接頭插入 3D 列印支架的孔洞當中，目的在於要組合循跡控制板。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231814.png" alt="循跡自走車"></p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231859.png" alt="循跡自走車"></p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231930.png" alt="20210205231930"></p>
<p>灰色的線則向上和馬克一號 A3 的腳位連接。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205231958.png" alt="循跡自走車"></p>
<p>將循跡控制板插入五條線的接頭，如果在運行的時候發現偵測狀況不理想，可使用十字螺絲起子，調整循跡偵測的靈敏度。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205232024.png" alt="安裝循跡控制板"></p>
<p>最後放入四顆 3 號電池，就完成了 Webduino 循跡自走車的升級改造。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205232045.png" alt="Webduino 循跡自走車"></p>
</li>
</ul>
<h5 id="43-%E9%AB%94%E9%A9%97-webduino-%E5%BE%AA%E8%B7%A1%E5%8A%9F%E8%83%BD">4.3. 體驗 Webduino 循跡功能</h5>
<p>  打開 Webduino 循跡自走車操控頁面，在上方填入自走車馬克一號的 Device ID，按下 Connect 連線，連線成功之後，就可以開始使用下方的遙控器循跡與記錄功能。</p>
<p>循跡自走車操&gt;控頁面：<code>https://goo.gl/NrTrLb</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205232142.png" alt="Webduino 循跡功能"></p>
<p>遙控器第一個部分有三個按鈕：</p>
<ul>
<li>第一個按鈕是「循跡與紀錄軌跡」的功能，點選之後就會啟動循跡功能，只要地上有黑色的線 (寬度需大於四公分)，就會跟隨著黑線移動，同時也會開始記錄移動的軌跡。</li>
<li>第二個按鈕是「停止」，除了會停止自走車的動作，同時也停止軌跡的紀錄。</li>
<li>最後一個按鈕是「播放」，點選之後自走車就會開始運行上一次紀錄的路徑。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205232226.png" alt="循跡設定"></p>
<p>遙控器的第二個部分為「軌跡控制板」，當我們在上面繪製線條圖案，自走車就會跑出我們所繪製的形狀。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205232246.png" alt="繪製循跡路徑"></p>
<p>由於每輛自走車的馬達轉速不見得相同 ( 相同型號的馬達轉速也都會有誤差 )，電池的電量也都會有差異，所以在遙控器最後一個部分提供了「設定」功能：</p>
<ul>
<li>拉霸 Around：修正左右偏移量，如果自走車在跑的時候一直向左偏，就往右調整一些</li>
<li>拉霸 Rotational speed：表示速度，速度 100% 表示全速行進</li>
<li>拉霸 Radial：微調校正速度。假設在 100% 的速度下 150ms 會跑 50px，但實際上卻只跑了 40px，就必須透過 Radial 修正</li>
<li>拉霸 Degree：微調修正轉的角度，原理和 Raidal 相同
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205232321.png" alt="馬達轉速"></li>
</ul>
<h5 id="44-webduino-blockly-%E6%93%8D%E4%BD%9C">4.4. Webduino Blockly 操作</h5>
<p>  如果不想要用遙控器操作，亦可使用 <a href="https://blockly.webduino.io">Webduino Blockly 編輯工具</a> 實現循跡功能，打開下方的範例網頁，會帶出對應的循跡自走車程式，填入 Device ID，點選右上方的執行按鈕，就會看到自走車沿著黑色路線行進了。</p>
<p>範例程式：<code>https://goo.gl/8XYAam</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205232423.png" alt="循跡自走車積木"></p>
<p>以上就是 2017 Webduino 循跡自走車的組裝與基本操控。</p>
<hr>
<h2 id="webduino-fly">Webduino Fly</h2>
<h3 id="1-%E5%95%86%E5%93%81%E6%8F%8F%E8%BF%B0">1. 商品描述</h3>
<ul>
<li>
<p>Webduino Fly
Webduino Fly 是因應 Arduino UNO 誕生的開發板，也稱為 Arduino UNO 雲端擴充板，當 Arduino UNO 套用 Webduino Fly 之後，立即就變成具備透過 Wifi 控制的能力，立即擁有完整的 Webduino 開發功能，易學易用，不管是入門使用者、進階開發者、資深研究者等，不需要理會硬體的煩雜技術，只需用 Web 技術，就可以控制 Arduino 相容的感應模組的神兵利器！</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210214191614.png" alt="Webduino Fly"></p>
</li>
<li>
<p>產品說明</p>
<ul>
<li>開關 STA 模式：Wi-Fi 初始化設定</li>
<li>開關 AP 模式：Webduino 模式 ( Wi-Fi )</li>
<li>斷線指示燈：Webduino 模式下，若 Wi-Fi 斷線會亮燈</li>
<li>按鈕：Reset</li>
</ul>
</li>
<li>
<p>和 Arduino UNO 組裝照片
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210214191754.png" alt="20210214191754"></p>
</li>
<li>
<p>初次使用必看
實作 Webduino Fly 之前，最重要的就是進行初始化設定，初始化設定的目的在於讓 Webduino Fly可以自動上網，請連結至初始化設定教學頁面按照步驟設定，確保可以正常使用。此外，要走 Arduino Firmata 的通訊協定，所以必須「要燒錄具有 Firmata 通訊協定的韌體」，請點選下方網址觀看燒錄步驟與相關設定，讓你的 Arduino UNO 長出 Web 的翅膀，一起遨遊雲端！</p>
</li>
</ul>
<h3 id="2-webduino-fly-%E5%88%9D%E5%A7%8B%E5%8C%96%E8%A8%AD%E5%AE%9A">2. Webduino Fly 初始化設定</h3>
<p>使用 Webduino Fly (UNO 雲端擴充板)，可以讓你手邊的 Arduino UNO 變成 Webduino，具備完整的 Webduino 功能，然而使用 UNO 雲端擴充板之前，最重要的就是進行初始化設定，初始化設定的目的在於讓 Webduino UNO 雲端擴充板可以自動上網。</p>
<blockquote>
<p><font color='orange'>Webduino Fly 無法獨立運作，必須搭配 Arduino UNO 操控。</font>
以下的步驟將會介紹如何進行設定，閱讀過程請注意<font color='orange'>橘黃色</font>的文字，這些文字描述了大家在設定的時候，比較容易犯的錯誤。</p>
</blockquote>
<p>Webduino Fly 初始化步驟說明</p>
<ul>
<li>
<p>組合 Arduino UNO 與 Webduino Fly</p>
<p>將「Webduino Fly」與「Arduino UNO」組合，就成為「Webduino UNO 開發板」。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210214200228.png" alt="Webduino Fly+Arduino Uno"></p>
</li>
<li>
<p>將 Webduino Fly 切換為設定模式</p>
<p>在 Webduino Fly 上面會有一顆可以左右扳動的小開關，將開關扳動至 STA 模式，就可以開始進行初始化設定。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210214200307.png" alt="初始化"></p>
</li>
<li>
<p>使用 Wi-Fi 搜尋 Webduino Fly</p>
<p>使用電腦或行動裝置，打開 Wi-Fi 搜尋對應的 Webduino 開發板 SSID 名稱，點選之後輸入密碼，即可讓電腦或行動裝置與 Webduino 開發板連線，開發板的 SSID 與密碼會貼在「裝置說明書」或開發板上，通常為「wa」開頭。(範例名稱為 wa101)
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210214200408.png" alt="Webduino 初始化"></p>
</li>
<li>
<p>連線 Webduino Fly 進行設定</p>
<p>打開 Chrome 或 Safari 瀏覽器，於網址列輸入「<code>http://192.168.4.1</code>」，即可打開 Webduino 開發板的設定頁面，在設定頁面輸入家裡、公司場所或行動裝置分享的網路基地台 SSID 與 PASSWORD。(<font color='orange'>此處的 SSID 為「網路基地台」的 SSID，並非 Webduino 開發板，不要填成裝置說明卡上頭的 SSID 與 PASSWORD</font>，且 SSID 與 PASSWORD 有限制 14 個字元，只能大小寫的英文字母與數字的組合，要特別注意！)
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210214200514.png" alt="Webduino 初始化"></p>
</li>
<li>
<p>重啟 Webduino Fly
輸入完 SSID 與 PASSWORD 之後，點選送出，若出現「OK」的字樣，表示 Webduino 開發板已經初始化成功，並且可以和家裡、公司場所或行動裝置分享的網路基地台連線 ( 若遲遲沒有出現「OK」字樣，表示初始化設定不成功，返回步驟 3 重新開始 )，完成後先移除開發板電源，再將開關扳至右側 ( AP 模式 )，重新接上電源即可進行重啟。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210214200658.png" alt="Webduino Fly 初始化"></p>
</li>
<li>
<p>確認連線是否成功
Webduino 開發板重啟後，便可將電腦或行動裝置切回正常的網路連線，並連結 <code>https://webduino.io/device.html</code>，輸入對應的 device 名稱確認是否連線成功，如果連線成功則會出現 OK 的顯示，連線成功後即可開始玩轉 Webduino。(若在網頁上沒有對應 Webduino 開發板，則需重啟 Webduino 開發板或返回步驟 2 重新初始化設定)</p>
<blockquote>
<p>連線確認網址：<code>https://webduino.io/device.html</code>
Off-line 燈號判斷：<font color='orange'>紅燈熄滅 (連線成功)、紅燈恆亮 (STA 模式 或 連線失敗)、紅燈閃爍 (嘗試連線)</font>。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210214200805.png" alt="Webduino Device ID"></p>
<p>如果是使用 Webduino Fly 還有一個更簡單的判斷方式，在板子上有一個紅色的小 LED 燈，正在連線的時候紅色 LED 會發亮，連線成功後就會熄滅，若 LED 燈持續閃爍，表示沒有連線成功，這時請重啟 Webduino 開發板，或返回步驟 2 重新初始化設定。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210214200831.png" alt="Webduino Fly 初始化"></p>
</li>
<li>
<p>Webduino Fly 已經可以連線網路基地台
進行到此步驟，表示 Webduino 開發板已經可以自行連上家裡、公司場所或行動裝置分享的網路基地台，並自動連結上雲端的伺服器，我們就可以開始透過 Wi-Fi 去控制 Webduino 開發板囉！</p>
</li>
<li>
<p>Webduino Fly 韌體更新
在最新的版本中，Webduino Fly 新增了更多的功能，為了能夠使用這些功能，我們需要先將 Webduino Fly 的韌體程式更新。而 Webduino Fly 具有兩種韌體更新方式，分別為雲端更新和 Arduino 燒錄，這裡推薦使用<font color=orange>雲端更新</font>。</p>
</li>
<li>
<p><a href="https://tutorials.webduino.io/zh-tw/docs/cloud/basic/webduino-device-update.html">雲端更新教學(推薦)</a></p>
</li>
</ul>
<h3 id="3-device-%E8%A3%9D%E7%BD%AE%E7%AE%A1%E7%90%86%E9%9B%B2%E7%AB%AF%E6%9B%B4%E6%96%B0">3. Device 裝置管理(雲端更新)</h3>
<p>如果已經透過 Webduino Device 裝置管理新增與認證裝置，下一步就可以開始進行雲端更新。不論裝置是否在身邊，只要裝置處於上線狀態，就能透過雲端更新的方式輕鬆進行遠端更新，甚至可以多台裝置同時更新、同時設定。</p>
<ul>
<li>
<p>雲端更新韌體
雲端更新的方式很簡單，一開始先勾選需要雲端更新的裝置，點選左上方的「更新韌體」按鈕，雲端更新可以進行單選或是多選，但所選取的裝置必須為<font color=orange>同一種類型且經過認證</font>，如果發現多選之後無法點選更新按鈕，可能是包含了不同類型的裝置，或有某些裝置尚未經過認證。(更新版本請參考下方「雲端更新版本」 )</p>
<blockquote>
<p>更新韌體支援的開發板：馬克一號、Fly
Smart 目前僅支援「雲端更新版本」，更新後一併將韌體升級至最新版，請繼續往下閱讀雲端更新版本的內容</p>
</blockquote>
<blockquote>
<p><font color=orange>開發板 SSID 為 wa6000 號之前的開發板無法進行更新</font>，需寄回 Webduino 進行更新 ( 例如 wa6001 可以更新，wa5999 無法更新 )，郵寄地址：80661 高雄市前鎮區復興四路 12 號 2 樓之 6，慶奇科技收。( 請於信封或包裹內容描述「無法進行雲端更新，協助更新版本」)</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215122350.png" alt="雲端更新開發板"></p>
<p>點選更新韌體按鈕之後，可以從下拉選單選擇需要更新的韌體。</p>
<blockquote>
<p>注意，若是使用馬克一號或 Fly，請先將「版本」更新至 1.8.5 以上才能進行韌體更新。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215122539.png" alt="選擇更新韌體"></p>
<p>選擇完成後就會開始進行更新，更新完成，開發板就會變成相對應的韌體了。</p>
<blockquote>
<p>注意，更新的時候切勿移除開發板電源或中斷網路連線，避免更新失敗。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215123108.png" alt="開發板更新完成"></p>
<p>使用 Webduino 雲端平台更新的好處，只要裝置都經過認證，就可以一次勾選多台裝置同時更新。</p>
<blockquote>
<p>同時更新必須為同一種類型的開發板。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215123145.png" alt="多台裝置同時更新"></p>
<p>在燒錄完成的訊息提示裡，也會標註每一個裝置的燒錄狀態，燒錄成功會用綠色表示，燒錄失敗會用紅色表示。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215123210.png" alt="燒錄狀態"></p>
</li>
<li>
<p>雲端更新版本
除了更新操控元件的韌體外，亦可透過「更新版本」的按鈕，將開發板核心程式更新，近一步取得更穩定的開發板核心程式。(注意，更新的時候<font color=orange>切勿移除開發板電源或中斷網路連線</font>，避免更新失敗。)</p>
<blockquote>
<p>雲端更新版本支援的開發板：馬克一號、Fly、Smart</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215123658.png" alt="更新版本"></p>
</li>
<li>
<p><a href="https://goo.gl/4qJ9j1">Arduino 韌體下載與燒錄</a></p>
</li>
</ul>
<h3 id="4-%E6%87%89%E7%94%A8">4. 應用</h3>
<h4 id="41-%E6%8E%A7%E5%88%B6%E5%96%AE%E9%A1%86-led-%E7%87%88">4.1. 控制單顆 LED 燈</h4>
<p>只有一顆 LED 燈的接線方式很簡單，首先，LED 燈有「長短腳」之分，長腳接「高電位」(帶有數字的腳位)，短腳接「低電位」(GND、接地)，因此我們只要直接將 LED 插到腳位上即可，或使用麵包板與麵包線外接出來，在這裡長腳接 10，短腳接 GND。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215125016.png" alt="20210215125016"></p>
<ul>
<li>
<p>Webduino Blockly 操作解析
打開 <a href="https://blockly.webduino.io">Webduino Blockly 編輯工具</a>，在第一個範例裡頭，我們將會點選網頁「燈泡圖案」來控制 LED 燈的切換，所以要先點選右上方「網頁互動測試」的按鈕，打開內嵌測試的網頁，用下拉選單選擇「點擊燈泡」，就會出現讓我們可以點選燈泡的網頁。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215130442.png" alt="20210215130442">
從編輯工具左側的積木選單中選擇「開發板」，將開發板放到畫面當中，填入對應的 Webduino 開發板名稱 ( Device 名稱，不要勾選串連 )，接著選擇「LED 燈」的積木，將 LED 燈的積木放到開發板積木的缺口內，腳位設定為 10 ( 因為剛剛把長腳接在 10 號腳 )。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215130510.png" alt="20210215130510"></p>
<p>因為要和網頁互動，所以我們要從積木選單的最下方「網頁互動」，點選「點擊燈泡」，就會看到很多點擊網頁燈泡圖片互動的選項。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215130526.png" alt="20210215130526"></p>
<p>把「點擊燈泡執行」的積木放到編輯畫面裡，代表點擊燈泡時要做些什麼事情。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215130540.png" alt="20210215130540"></p>
<p>在執行的內容放入「邏輯」的積木，判斷點擊燈泡時，依據當時的狀態做出相對的反應，而我們也可以利用邏輯積木上面「藍色小齒輪」，添增邏輯選項。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215130555.png" alt="20210215130555"></p>
<p>根據邏輯，判斷「當燈泡是 on」的話，點擊燈泡就會變成「off」，反之就是「on」。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215130606.png" alt="20210215130606"></p>
<p>完成後，確認開發板上線 ( 點選「檢查連線狀態」查詢 )，點選紅色的執行按鈕，就可以開始。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215130623.png" alt="20210215130623"></p>
<p>點擊內嵌網頁裡的燈泡圖片，就可以輕鬆地控制 LED 燈的明暗，然而我們也可以點選「JavaScript 頁籤」，就可以看到完整的程式碼邏輯，同時也可以複製這些代碼，貼到自己的網頁原始碼當中，就可以在自己的網頁裡實現一模一樣的行為囉！</p>
<p>(解答： <code>https://blockly.webduino.io/#-K4pR8RaEF6IkiWdAYk7</code>)</p>
</li>
</ul>
<h4 id="42-%E6%8E%A7%E5%88%B6%E5%85%89%E6%95%8F%E9%9B%BB%E9%98%BB">4.2. 控制光敏電阻</h4>
<p>首先我們放入開發板的積木，下拉選單選擇 WebSocket ( 注意，使用 WebSocket 的工具網址必須是 http 開頭 )，填入開發板的 ip 位址，放入光敏電阻的積木，類比腳位選擇 A0
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215215604.png" alt="20210215215604"></p>
<p>放入光敏電阻開始偵測的積木，並讓偵測的數值顯示在網頁互動測試區域裡，點選右上方紅色按鈕執行，就會看到光的數值轉換為小數點呈現出來了。
(解答：`<a href="http://blockly.webduino.io/#-KbJWK4xVaxi0BEUct-U">http://blockly.webduino.io/#-KbJWK4xVaxi0BEUct-U</a>)
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215215621.png" alt="20210215215621"></p>
<p>如果覺得直接類比訊號讀入的浮點數不是自己想要的數值，我們可以透過「四捨五入」和「尺度轉換」兩種積木，將光敏電阻的數值，轉換成 0 到 100 之間，小數點兩位的數值顯示。
(解答：<code>http://blockly.webduino.io/#-KbJWUprpSwvmWuBjfcU</code>)</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215215758.png" alt="20210215215758">
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215215811.png" alt="20210215215811"></p>
<p>還記得之前才提過的 Smart 三色燈初體驗 嗎？我們也可以透過簡單的邏輯判斷，讓數值 0~0.2 顯示紅色，0.2~0.4 顯示綠色，0.4~0.6 顯示藍色，大於 0.6 就，三色燈元件和光敏電阻的搭配，只需要一塊小小的 Smart 開發板就能搞定。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210215215828.png" alt="20210215215828"></p>
<p>點選右上方紅色按鈕執行，用手去遮住光敏電阻，或是用燈去照光敏電阻，就會看見 Smart 的三色燈出現不同的顏色。 (解答：<code>http://blockly.webduino.io/#-KbJXCjhMYgmr6Pm7Gud</code>)</p>
<h4 id="43-rfid%E6%8E%A7%E5%88%B6-youtube">4.3. RFID(控制 Youtube)</h4>
<ul>
<li>
<p>範例影片展示</p>
<div class="video-container">
  <iframe width="560" height="316" src="https://www.youtube.com/embed/RrCAOgtPHdo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</li>
<li>
<p>接線與實作
接線方式和上一篇範例一模一樣，將 SDA 接 10，SCK 接 13，MOSI 接 11，MISO 接 12，GND 接在 GND，VCC 接在 3.3V 的位置，此外因為腳位限制，所以在這個範例<font color=blue>必須使用 Arudino UNO 和 Webduino FLY 雲端擴充板搭配進行</font>。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216120035.png" alt="Fly 接線 RFID"></p>
<p>實際接線照片：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216120134.png" alt="Fly 接線 RFID"></p>
</li>
<li>
<p><font color=blue>Webduino Smart 接線方式</font>
如果是使用 Webduino Smart 腳位也有對應功能，所以接線方式就把 15 接 SDA，14 接 SCK，13 接 MOSI，12 接 MISO，GND 接 GND，3.3V 接 3.3V 的位置。</p>
<blockquote>
<p>如果要使用 Smart 操控，請使用 雲端平台 更新韌體，韌體版本有 reg 標記表示有支援 RFID。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216120238.png" alt="Smart 接線 RFID"></p>
<p>實際接線照片：
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216120258.png" alt="Smart 接線 RFID"></p>
</li>
<li>
<p>Webduino Blockly 操作解析
打開 Webduino Blockly 編輯工具 (<code>https://blockly.webduino.io</code>)，因為這個範例會需要知道 RFID 感應卡的「卡號」，所以必須先用網頁「顯示文字」來顯示偵測到的每張 RFID 磁卡的卡號，先打開 Webduino Blockly 的網頁互動測試區，下拉選單選擇「顯示文字」，此時在右下角會出現對應的積木功能可以選擇。(如果已經知道卡號則可略過這個步驟。)</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216121447.png" alt="網頁互動測試"></p>
<p>把開發板放到編輯畫面裡，填入對應的 Webduino 開發板名稱，開發板內放入 RFID 的積木，名稱設定為 rfid，腳位設定為 10、13、11、12，放入「偵測訊號」的積木，在我們拿 RFID 磁卡或磁扣去感應讀卡器的時候，右邊的網頁就會顯示對應的識別碼。( 如果是 Smart 就選擇 SDA 15、SCK 14、MOSI 13、MISO 12 )</p>
<blockquote>
<p>RFID 的積木在「無線感應 &gt; RFID」目錄下。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216121518.png" alt="RFID 積木"></p>
<p>填入裝置 Device ID，確認開發板上線，點選右上方紅色按鈕執行，用不同的磁卡或磁扣去感應讀卡器，就會出現識別碼，這時我們先把這些對應的代碼記下來，待會就要用這些代碼來判斷。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216121556.png" alt="偵測磁卡與磁扣代碼"></p>
<p>回到右邊的網頁互動測試區，下拉選單選擇「Youtube」，此時在右下角會出現對應的積木功能可以選擇。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216121623.png" alt="Youtube 網頁互動"></p>
<p>Youtube 的積木都在左邊網頁互動裡面，一開始我們要先載入 Youtube 模組，注意！模組只需要載入一次，因此該積木不要放到 RFID 偵測到訊號的區塊裡，不然會變成每次偵測都會載入一次模組，就會出錯了。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216121647.png" alt="Youtube 模組積木"></p>
<p>打開 Youtube，選擇一段影片，複製這段影片的網址，回到剛剛的畫面貼上。</p>
<blockquote>
<p>注意，網址不支援使用 Youtube 分享功能的「縮網址」。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216121717.png" alt="20210216121717"></p>
<p>如果說我們想要利用磁扣切換播放的影片，只要放入「更換 Youtube 影片」的積木，把要更換的影片網址填進去就可以切換。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216121750.png" alt="設定磁卡切換 Youtube 影片"></p>
<p>除了切換影片，也可以把 RFID 磁卡當作控制 Youtube 的方式，下圖是透過三張卡片，分別控制影片的播放、暫停與停止。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210216121819.png" alt="設定磁卡控制影片播放"></p>
<p>做好之後，填入裝置 Device ID，確認開發板上線，點選右上方紅色按鈕執行，就可以開始用 RFID 磁卡控制 Youtube 影片了。</p>
<p>執行的時候有可能會發生「腳位選錯但仍正確讀取到卡號」的狀況，這是因為 RFID 程式底層不是使用數字，而是使用 SDA、SCK、MOSI 和 MISO 操控，在積木上的腳位則是方便使用者接線識別，不過如果實際接線接錯，仍然是無法順利運作的，要特別注意。</p>
<p>範例解答：<code>https://goo.gl/Se8IN7</code></p>
</li>
<li>
<p>相關參考</p>
<ul>
<li>範例解答：<code>https://goo.gl/Se8IN7</code></li>
<li>範例完整程式碼：<code>http://bin.webduino.io/giki/edit?html,js,output</code></li>
</ul>
</li>
</ul>
<hr>
<h2 id="%E6%99%BA%E6%85%A7%E8%BF%BD%E8%B9%A4--%E4%BC%BA%E6%9C%8D%E9%A6%AC%E9%81%94--%E6%94%9D%E5%BD%B1%E6%A9%9F">智慧追蹤 ( 伺服馬達 + 攝影機 )</h2>
<h3 id="%E7%AF%84%E4%BE%8B%E5%BD%B1%E7%89%87%E5%B1%95%E7%A4%BA">範例影片展示</h3>
<p><a href="https://youtu.be/-l4bSdcpeME">https://youtu.be/-l4bSdcpeME</a></p>
<h3 id="%E6%8E%A5%E7%B7%9A%E8%88%87%E5%AF%A6%E4%BD%9C">接線與實作</h3>
<p>伺服馬達具有三條電線。紅色的為正電，深咖啡色是接地 GND，橘色的則是訊號線，伺服馬達需使用 5V 或 VCC 的供電，或者使用獨立電源進行供電，此處我們將伺服馬達的訊號腳接在開發板的數位腳 ( 5 腳位 )。</p>
<p><strong>操作解析</strong>
打開 Webduino Blockly 編輯工具 (<code>https://blockly.webduino.io</code>)，因為這個範例會使用人臉追蹤，所以要打開網頁互動測試區，下拉選單選擇「影像追蹤」，選擇之後在左側積木清單的最下方，就會出現對應的積木。
<a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/servo.jpg"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/servo3_s.jpg" class="nofancybox  img-center"/></a></p>
<p>在畫面中放入開發板積木，填入 <code>Device ID</code>，在開發板內放入伺服馬達的積木，腳位設定 <code>5</code>，伺服馬達變數名稱設定為 <code>servo</code>。</p>
<blockquote>
<p>開發板的積木在「開發板控制」目錄下，伺服馬達積木在「玩具及馬達 &gt; 伺服馬達」的目錄下。
<a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/servo1.jpg"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/servo4_s.jpg" class="nofancybox  img-center"/></a></p>
</blockquote>
<p>再來需要設定三個變數，並將變數更名 servoAngle、check 和 videoWidth</p>
<ul>
<li>變數 <code>servoAngle</code> 是「伺服馬達旋轉的角度」，將伺服馬達的初始化角度設為 <code>90</code> 度 ( 伺服馬達左右擺動為 <code>0 ~ 180</code> 度 )</li>
<li>變數 <code>check</code> 則是「人臉座標和影片畫面中心的差距」，如果是 <code>0</code> 表示人臉在畫面的中間</li>
<li>變數 <code>videoWidth</code> 則是追蹤影片畫面的寬度。</li>
</ul>
<blockquote>
<p>變數的積木在「變數」目錄下。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205223625.png" alt="伺服馬達設定積木"></p>
</blockquote>
<p>接著使用「影像追蹤」的積木，並設定為「追蹤人臉」，再來放入變數 facePosition 與數學運算的積木，將 facePosition 的數值設定為「<font color=orange>追蹤數值 x - ((影片寬度/2) - (追蹤數值 width/2))</font>」，目的在於判斷人臉是在中間的位置。</p>
<p>數學運算的積木在「基本功能 &gt; 數學式」目錄下。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205223728.png" alt="影像追蹤積木"></p>
<p>如果不容易理解數學公式，可以參考下面的分解圖。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205223747.png" alt="影像追蹤積木原理"></p>
<p>原理大概如下圖所示，因為人臉的座標不斷在變化，如果要確定人臉是在「中間」，就必須透過一系列數學運算的轉換，如此才能把人臉移動的位置，對應到伺服馬達旋轉角度上。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205223808.png" alt="影像追蹤積木原理"></p>
<p>接著放入邏輯積木，透過藍色小齒輪增加判斷條件，讓人臉位置如果在 -30 ~ 30 之間的話，伺服馬達不會移動，如果超過這個區間，伺服馬達就會開始轉動，直到人臉又進入這個區間為止。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205223827.png" alt="設定伺服馬達偵測影像旋轉角度"></p>
<p>最後多增加伺服馬達旋轉角度判斷，如果 servoAngle 大於 180，就讓 servoAngle 保持在 180，如果 servoAngle 小於 0，就讓 servoAngle 保持在 0。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210205223844.png" alt="設定伺服馬達偵測影像旋轉角度"></p>
<p>確認開發板上線，點選右上方紅色按鈕執行程式，就會看到攝影機所拍攝的畫面出現在網頁互動區，如果偵測到的人臉不在中心位置，就會自動轉向直到人臉進入中心位置為止。</p>
<ul>
<li>積木
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye_s.jpg' class="nofancybox  img-center" /></a></li>
</ul>
<blockquote>
<p>解答：<a href="https://goo.gl/sEMe9A">https://goo.gl/sEMe9A</a></p>
</blockquote>
<p>相關參考
範例解答：<code>https://goo.gl/sEMe9A</code>
範例完整程式碼：<code>https://bin.webduino.io/qugib/edit?html,css,js,output</code>
人臉追蹤教學文：<a href="https://tutorials.webduino.io/zh-tw/docs/useful/component/led-tracking-face.html">LED (人臉追蹤)</a>
伺服馬達教學文：<a href="https://tutorials.webduino.io/zh-tw/docs/basic/component/servo.html">伺服馬達</a></p>
<hr>
<h2 id="smart-%E6%99%BA%E6%85%A7%E5%B1%8B">Smart 智慧屋</h2>
<h3 id="%E6%9D%90%E6%96%99%E5%88%97%E8%A1%A8">材料列表</h3>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-01.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-01_s.jpg' class="nofancybox  img-center" /></a></p>
<h3 id="1-%E7%B5%84%E8%A3%9D%E6%88%BF%E5%AD%90">1. 組裝房子</h3>
<ol>
<li>
<p>首先將 A 板 B 板分別拆下，底部對齊，垂直安裝。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-02.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-02_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>C 板對齊 A 板凹槽，C 板對齊 B 板凸位，3 板子相互垂直安裝。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-03.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-03_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>D 板對齊 A 板凹槽，D 板對齊 B 板凸位，互相垂直安裝。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-04.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-04_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
</ol>
<h3 id="2-%E7%B5%84%E8%A3%9D%E9%96%80">2. 組裝門</h3>
<ol>
<li>
<p>將門板 I 底部凸出處，斜插入 A 板圓孔位。</p>
</li>
<li>
<p>將 J 板圓孔套在門板 I 上端凸出處。</p>
</li>
<li>
<p>豎直門板，對齊嵌入。</p>
</li>
<li>
<p>嘗試轉動門軸，可以順利轉動即可進行安裝馬達。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-05.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-05_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
</ol>
<h3 id="3-%E7%B5%84%E8%A3%9D%E9%96%80%E6%8A%8A%E6%A9%9F%E9%97%9C">3. 組裝門把機關</h3>
<ol>
<li>
<p>如圖先將軸柄安裝至伺服馬達上，透過雲端平台拖拉積木程式，校正為 90 度，再將軸柄拿掉。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-06.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-06_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>取出 K、Ｌ ( 1、2、3、4、5、6 )。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-07.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-07_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>組合成門把。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-08.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-08_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>將門把安裝至門上。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-09.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-09_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>將門把安裝到馬達上
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-10.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-10_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
</ol>
<h3 id="4-%E5%AE%89%E8%A3%9D-smart-%E9%96%8B%E7%99%BC%E6%9D%BF%E5%8F%8A-lcd-%E9%A1%AF%E7%A4%BA%E5%99%A8">4. 安裝 Smart 開發板及 LCD 顯示器</h3>
<ol>
<li>
<p>Smart 開發板放置在 A 板中央孔位，LCD 顯示器可以嵌入 B 板大長方形孔位中。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house11.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house11_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
</ol>
<h3 id="5-%E7%B5%84%E8%A3%9D%E7%89%86%E5%A3%81%E5%B1%8B%E9%A0%82%E5%AE%89%E8%A3%9D-smart-%E9%96%8B%E7%99%BC%E6%9D%BF%E5%8F%8A-lcd-%E9%A1%AF%E7%A4%BA%E5%99%A8">5. 組裝牆壁、屋頂安裝 Smart 開發板及 LCD 顯示器</h3>
<ol>
<li>
<p>H 板兩邊缺口垂直朝下安裝。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-12.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-12_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>將 F 板凹槽旁短邊朝 H 板屋脊方向安裝。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-13.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-13_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>E 板底部對齊 A 板凹槽，C、D 板凹槽與 E 板凸位相互垂直對齊安裝。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-14.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-14_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>G 板凹槽旁短邊朝屋脊方向安裝，確認小屋是否穩固。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-15.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-15_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
</ol>
<h3 id="6-%E5%AE%8C%E6%88%90%E7%B5%84%E8%A3%9D">6. 完成組裝</h3>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-16.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-house-16_s.jpg' class="nofancybox  img-center" /></a></p>
<h2 id="%E6%99%BA%E6%85%A7%E6%8F%92%E5%BA%A7">智慧插座</h2>
<ul>
<li>
<p>範例影片展示</p>
<div class="video-container">
  <iframe width="560" height="316" src="https://www.youtube.com/embed/nFEY_k_2zxQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</li>
<li>
<p>接線與實作</p>
<p>我們使用的插座有兩個插孔，其中一個插孔會接上家用電，同時這個插孔會提供 <code>Webduino</code> 開發板電源，然後透過繼電器來控制另外一個插孔的供電與否，因此我們會把接在插孔上的單心線，接到繼電器的「公共」與「常開」端，然後繼電器的 VCC 接在開發板的 5V，GND 接在 GND，Vin 訊號腳可以接在 2~13。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-01.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-01_s.jpg' class="nofancybox img-center" /></a></p>
<p>所需材料列表：</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-02.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-02_s.jpg' class="nofancybox img-center" /></a></p>
<p>一開始先把插座和插座背板結合，插座有卡榫，直接裝上去就可以。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-03.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-03_s.jpg' class="nofancybox img-center" /></a></p>
<p>中間的空間剛好可以放入繼電器，可以直接卡進去或是用熱熔膠固定，插座則看照片放入五根單心線，單心線很硬，直接塞進去插座的接孔內就可以 (內有金屬夾片會自動卡住 )</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-04.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-04_s.jpg' class="nofancybox img-center" /></a></p>
<p>組合插頭與電線，直接把電線的頭去皮，分別鎖到插頭上即可。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-05.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-05_s.jpg' class="nofancybox img-center" /></a></p>
<p>把單心線和電線，用快速接頭連接，同時也把單心線接到繼電器上面 ( 公共端 與 常開端)。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-06.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-06_s.jpg' class="nofancybox img-center" /></a></p>
<p>繼電器的另一側用杜邦線接出來。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-07.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-07_s.jpg' class="nofancybox img-center" /></a></p>
<p>組合外殼。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-08.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-08_s.jpg' class="nofancybox img-center" /></a></p>
<p>上蓋用螺絲固定 ( 若螺絲太小可用墊片與螺帽輔助 )。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-09.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-09_s.jpg' class="nofancybox img-center" /></a></p>
<p>和開發板連線就完成囉！插座上有兩個插孔，一個是固定供電給開發板，透過 Wi-Fi 來控制另外一個插孔有沒有電。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-10.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-10_s.jpg' class="nofancybox img-center" /></a></p>
</li>
<li>
<p>Webduino Blockly 操作解析
打開 <a href="https://blockly.webduino.io">Webduino Blockly 編輯工具</a>，把開發板放到編輯畫面裡，填入對應的 Webduino 開發板名稱，然後放入 LED 的積木，名稱設定為 <code>led</code>，腳位設定為 <code>10</code>。</p>
<blockquote>
<p>LED 的積木在「發光元件 &gt; LED 燈」目錄下。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-11.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-11_s1.jpg' class="nofancybox img-center" /></a></p>
</blockquote>
<p>打開網頁互動測試區，下拉選單選擇「點擊燈泡」，待會要透過點擊這個燈泡圖案，控制智慧插座上的電燈或電器，選擇點擊燈泡之後，在左側積木清單的下方就會有對應的積木可以使用。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-12.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-12_s.jpg' class="nofancybox img-center" /></a></p>
<p>為了讓燈泡圖片和插座的電燈狀態一至，一開始先放入 led 狀態 off 和燈泡狀態 off 的積木。
<a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-13.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/smart-socket-13_s2.jpg' class="nofancybox img-center" /></a></p>
<p>最後放入點擊燈泡要執行的動作，動作就是「狀態切換」，如果原本是 on 就會變成 off，原本是 off 就會變成 on。</p>
<p>確認開發板上線，點選右上方紅色按鈕執行程式，點擊網頁燈泡圖片，就會看到燈泡圖片和插座上的電燈同時亮起，再點一下就會同時關閉。</p>
<blockquote>
<p>解答：<code>https://goo.gl/3FKjzi</code></p>
</blockquote>
</li>
<li>
<p>關參考</p>
</li>
<li>
<p>範例解答： <code>https://goo.gl/3FKjzi</code></p>
</li>
<li>
<p>範例完整程式碼： <code>https://bin.webduino.io/mujod/edit?html,css,js,output</code></p>
</li>
<li>
<p>只會插座三十篇完整教學：<a href="https://tutorials.webduino.io/zh-tw/docs/socket/index.html">主題課程：實戰智慧插座</a></p>
</li>
</ul>
<h3 id="%E4%BD%BF%E7%94%A8%E7%B6%B2%E9%A0%81%E6%93%8D%E6%8E%A7%E6%99%BA%E6%85%A7%E6%8F%92%E5%BA%A7">使用網頁操控智慧插座</h3>
<ul>
<li>
<p>順利連上 <code>Wi-Fi</code> 之後，可以透過下列方法來檢查裝置有沒有在線上。</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/online.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/online_s.jpg' class="nofancybox img-center" /></a></p>
</li>
<li>
<p>Webduino 程式用法</p>
<p>比較不熟悉的人所設計的，也就是透過「積木組裝」的方式來撰寫程式邏輯，接著來看一下對應的網頁程式要怎麼運作，首先我們點選右上方的程式編輯器，就會打開一個以 jsbin 為基底的編輯頁面，從這邊可以看到預設引入了幾支 JavaScript，撇除 JQuery、Firebase 和 runtime 這三個第三方 JavaScript，最主要就是要**引入「 webduino-min.js 」還有「 webduino-blockly.js 」這兩個 JavaScript，**這樣我們才有操控開發板以及燈泡的 API 可以使用。</p>
<pre class="hljs"><code><div><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Webduino<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://webduino.io/components/webduino-js/dist/webduino-all.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://blockly.webduino.io/webduino-blockly.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://blockly.webduino.io/lib/firebase.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://blockly.webduino.io/lib/runtime.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p>JS 的原始碼可以參考：</p>
<ul>
<li><code>https://github.com/webduinoio/webduino-js</code></li>
<li><code>https://github.com/webduinoio/webduino-blockly</code></li>
</ul>
<p>首先看到開發板的部分，透過 boardReady 判斷裝置是否上線，當上線之後就會執行內容的 function。</p>
<pre class="hljs"><code><div>boardReady(<span class="hljs-string">'裝置的 device 名稱'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">board</span>) </span>{
  board.systemReset();  <span class="hljs-comment">// 加入這行，裝置在第一次連線的時候，所有腳位輸出預設低電位 ( 0、off )</span>
  board.samplingInterval = <span class="hljs-number">250</span>; <span class="hljs-comment">// 類比腳位取樣時間</span>
});
</div></code></pre>
<p>因為裝置預設一次只能夠有一個人操控 (後面上線的會把前面上線的踢掉)，為了避免這種狀況，我們就必須要修改裝置的屬性，把 boardReady 的第一個變數改成物件的形式 <font color=red>{device:'裝置的 device 名稱', multi: true}</font>，這段 <font color=red>multi: true</font> 就是可以讓多人同時操控的關鍵屬性。</p>
<pre class="hljs"><code><div>boardReady({<span class="hljs-attr">device</span>:<span class="hljs-string">'裝置的 device 名稱'</span>, <span class="hljs-attr">multi</span>: <span class="hljs-literal">true</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">board</span>) </span>{
board.systemReset();
board.samplingInterval = <span class="hljs-number">250</span>;
});
</div></code></pre>
<p>再來看到控制「繼電器」的部分，因為訊號對於繼電器來說不是 1 (高電位、on) 就是 0 (低電位、off)，所以可以直接使用 LED 的控制方法，LED 的控制方法有以下幾種：</p>
<ul>
<li><font color=red>getLed(board, pin)</font>
設定 LED 為哪塊板子的幾號腳位。</li>
<li><font color=red>on(callback)</font>
設定輸出腳位為高電為 ( 1、on )，如果有 callback 的話，在執行 .on() 之後就會執行 callback 的函式。</li>
<li><font color=red>off(callback)</font>
設定輸出腳位為低電位 ( 0、off )，如果有 callback 的話，在執行 .off() 之後就會執行 callback 的函式。</li>
<li><font color=red>blink(time,callback)</font>
設定 LED 閃爍 ( 高電位低電位切換，time 是毫秒 )，如果有 callback 的話，在每次閃爍之後就會執行 callback 的函式。</li>
<li><font color=red>intensity</font>
設定「低電位」輸出強度。 ( 0~1 之間的浮點數，例如：.intensity=0.5 )</li>
<li><font color=red>toggle()</font>
設定狀態切換，如果上一次是高電位，下一次就會是低電位。</li>
</ul>
</li>
<li>
<p>網頁控制</p>
<p>簡單來說，如果我們要在網頁裡面放一個按鈕，點選按鈕，燈泡就會發亮，再點選一次燈泡就會熄滅，我們可以這樣寫：</p>
<pre class="hljs"><code><div>$(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{

  <span class="hljs-keyword">var</span> led,
    a = <span class="hljs-number">1</span>,
    btn = $(<span class="hljs-string">'#btn'</span>);

  boardReady({<span class="hljs-attr">device</span>:<span class="hljs-string">'你的裝置名稱'</span>, <span class="hljs-attr">multi</span>: <span class="hljs-literal">true</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">board</span>) </span>{
    board.systemReset();
    board.samplingInterval = <span class="hljs-number">250</span>;
    led = getLed(board, <span class="hljs-number">10</span>);
    btn.on(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
      a = a * <span class="hljs-number">-1</span>;
      <span class="hljs-keyword">if</span>(a&gt;<span class="hljs-number">0</span>){
        led.on();
      }<span class="hljs-keyword">else</span>{
        led.off();
      }
    });
  });
}); 
</div></code></pre>
<p>完整程式碼：<code>http://bin.webduino.io/tagum/1/edit?html,js,output</code>
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210212234043.png" alt="20210212234043"></p>
</li>
<li>
<p>小結
以上就是透過基本的網頁來操控插座上的電器，其實原理非常的簡單，只要把實際的電器「網頁變數化」，就可以像一般網頁操作變數一樣的來操作了。</p>
</li>
</ul>
<hr>
<h2 id="webeye">WebEye</h2>
<p><code>WebEye</code> 是目前市面上最快速入門 AIoT (AI+IoT) 的神兵利器，不僅能在電腦裝置上運行，也能完美支援行動裝置的操作使用。透過 <code>Webduino Blockly</code> 程式積木，搭配影像辨識訓練和人臉辨識學習，輕鬆開發千變萬化的影像辨識應用。</p>
<h3 id="1-wifi-%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95">1. WiFi 設定方法</h3>
<p>有兩種方法可以進行 WiFi 設定 (任選一種)，WebEye 預設連接的 WiFi SSID 為 webduino.io，密碼為 webduino</p>
<ul>
<li>
<p>方法一：使用 <code>WebEye</code> 設定畫面 (與 <code>Smart</code> 開發板相同)</p>
<ol>
<li>
<p><code>WebEye</code> 的設定畫面
<code>WebEye</code> 設定 <code>wifi</code> 方式和 <code>Smart</code> 開發板一樣，如不知道如何進入 <code>WebEye</code> 設定頁面，可以 參考此<a href="https://tutorials.webduino.io/zh-tw/docs/basic/board/smart-setup.html">教學</a></p>
<blockquote>
<p>注意：載入設定畫面需等待30秒，是正常的哦</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye.png" alt="Webeye"></p>
</li>
<li>
<p>按下 [Update] 彈出視窗 [Save OK] 就可以斷電，重新插上電源</p>
</li>
<li>
<p>看到 WiFi清單顯示 wd???_xxx.xxx.xx.xx 就表示上網，如下圖
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye1.png" alt="Webeye上網一"></p>
</li>
</ol>
</li>
<li>
<p>方法二：透過 Webduino Smart 開發板自動設定 WiFi&lt;此方法是透過連接 Smart 開發板，取得WiFi 設定&gt;</p>
<ol>
<li>Smart韌體更新到最新版本 3.2.5以上</li>
<li>依照<a href="https://tutorials.webduino.io/zh-tw/docs/basic/board/smart-setup.html">學習手冊</a>先設定好 Smart 的 WiFi，確認連線正常。</li>
<li>Smart 移除電源，將 GND/VCC 和 WebEye 對接、TX 腳位和 WebEye IO13 腳位 連接。</li>
<li>Smart 插上電源後會將 WiFi 設定傳送給 WebEye。</li>
<li>WebEye LED 停止閃爍後即可將 IO13 腳的連線移除。</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye2.png" alt="Webeye上網二"></p>
</li>
</ul>
<h3 id="2-%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F">2. 使用方式</h3>
<p>將 WebEye 開機並等待 LED 燈停止閃爍完全熄滅時,查看WiFi清單,可開啟 Chrome 瀏覽器輸入wdxxx_ 底線後的 IP位置(電腦必須和 WebEye 在相同區網):</p>
<ol>
<li>開啟筆記型電腦或手機,掃描 WiFi
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye3.png" alt="Webeye上網一"></li>
<li>瀏覽器輸入 <code>http://192.168.10.147/jpg</code> 出現影像表示設定成功。IP 並非永遠固定，請在每次 WebEye 連上網路後重新查詢。</li>
</ol>
<blockquote>
<p>注意事項
WebEye 僅支援 2.4G 頻段網路，請勿設定 5G 頻段網路。</p>
</blockquote>
<h3 id="3-%E9%81%A0%E7%AB%AF%E5%BD%B1%E5%83%8F%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95">3. 遠端影像設定方法</h3>
<p>開啟遠端影像可以跨網域取得 WebEye 影像。
警告：遠端影像功能將佔用網路頻寬與流量，計費型網路請酌量使用。</p>
<h4 id="31-%E9%96%8B%E5%95%9F%E9%81%A0%E7%AB%AF%E5%BD%B1%E5%83%8F">3.1 開啟遠端影像</h4>
<ol>
<li>
<p>確認 WebEye 已經設定好 WiFi 並成功連上網路。</p>
</li>
<li>
<p>依照上述方法取得 IP，開啟瀏覽器輸入 <code>http://[IP]/remote</code> (例如 <code>http://192.168.10.147/remote</code>)，會進入遠端影像設定畫面。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210227222749.png" alt="20210227222749"></p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye4.png" alt="Webeye開啟遠端影像"></p>
</li>
<li>
<p>不需要修改 Hostname 及 Interval，直接按下 [OK]。如果這兩個欄位已經被修改過 ，可先按下 [Default] 取得預設值。</p>
</li>
<li>
<p>設定完成後會取得 Remote URL。</p>
</li>
<li>
<p>在瀏覽器輸入 Remote URL，看見影像表示設定成功。</p>
</li>
</ol>
<h4 id="32-%E9%97%9C%E9%96%89%E9%81%A0%E7%AB%AF%E5%BD%B1%E5%83%8F">3.2 關閉遠端影像</h4>
<ol>
<li>進入遠端影像設定畫面。</li>
<li>清除 Hostname 並按下 [OK]。</li>
<li>顯示 Remote: disable! 表示關閉成功
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye6.png" alt="Webeye關閉遠端影像"></li>
</ol>
<h4 id="33-led-%E7%87%88%E8%99%9F%E6%84%8F%E7%BE%A9">3.3 LED 燈號意義</h4>
<p>WebEye 內建一顆 LED 燈，依據亮暗及閃爍速度代表不同意義。
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye7.png" alt="LED 燈號意義"></p>
<ol>
<li>開機後搜尋網路時：慢速閃爍</li>
<li>進入 SmartConfig WiFi 設定時：慢速閃爍</li>
<li>開機後檢查或更新韌體時：快速閃爍</li>
<li>連上 WiFi 準備就緒後：關閉</li>
</ol>
<h3 id="4-webeye-%E7%A8%8B%E5%BC%8F%E7%A9%8D%E6%9C%A8%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F">4. WebEye 程式積木使用方式</h3>
<ol>
<li>
<p>打開程式積木範例: <code>https://blocklypro.webduino.io/#XJLQm5lBv1</code></p>
<ul>
<li>填入 Smart 開發板的 DeviceID</li>
<li>填入 WebEye <strong>遠端影像網址</strong></li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye9.png" alt="遠端影像網址"></p>
</li>
<li>
<p>完整程式積木與使用方式
共有5顆按鈕，按鈕1,3控制鏡頭左右，按鈕2,5控制鏡頭上下，按鈕4設定鏡頭回原點。</p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye10.png" alt="完整程式積木"></p>
</li>
</ol>
<h3 id="5-webeye-%E8%A1%8C%E5%8B%95%E8%A3%9D%E7%BD%AE%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F">5. WebEye 行動裝置使用方式</h3>
<p>網頁使用網址: <code>https://webduinoio.github.io/webeye/app.html#????@http://????????</code></p>
<p><code>????：</code>填上 Smart 的 DeviceID
<code>http://????????：</code>填上WebEye 遠端網址（Remote URL）</p>
<ul>
<li>範例: <code>https://webduinoio.github.io/webeye/app.html#Ga6o@http://http://webeye.webduino.io/camera/LoaqO8L2M/live</code></li>
</ul>
<h3 id="6-%E6%93%B4%E5%85%85%E7%A9%8D%E6%9C%A8%E4%BD%BF%E7%94%A8%E6%95%99%E5%AD%B8">6. 擴充積木使用教學</h3>
<h4 id="61-%E5%95%9F%E7%94%A8%E5%85%8C%E6%8F%9B%E5%8D%B7">6.1. 啟用兌換卷</h4>
<p>兌換券(領取與添加新功能)
Webduino 除了原有的服務，額外提供加值功能，透過輸入「功能兌換券」代碼，就能讓原本的帳號多一項隱藏版功能，例如：專案數增加、Line 程式積木、影像辨識積木...等。</p>
<ul>
<li>
<p>實作流程
首先，進入 Webduino 雲端平台，註冊帳號並登入：<code>https://cloud.webduino.io/</code>
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210225154414.png" alt="20210225154414"></p>
<p>接著，點選 Blockly 程式積木
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210225154448.png" alt="20210225154448"></p>
<p>並於畫面右上角點選「兌換券按鈕」
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210225154927.png" alt="20210225154927"></p>
<p>輸入兌換券序號後，按下確定
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210225155016.png" alt="20210225155016"></p>
<p>兌換卷序號:  1902437108
提供 「氣象資料擷取積木」與 「Google 試算表加強版: SpreadSheet」。</p>
</li>
</ul>
<h4 id="62-%E5%BD%B1%E5%83%8F%E5%88%86%E9%A1%9E-%E6%90%AD%E9%85%8D%E5%BE%8C%E7%AB%AF%E5%BD%B1%E5%83%8F%E8%A8%93%E7%B7%B4%E5%B9%B3%E5%8F%B0%E5%B0%87%E8%A8%93%E7%B7%B4%E5%A5%BD%E7%9A%84%E5%BD%B1%E5%83%8F%E6%A8%A1%E5%9E%8B%E7%9B%B4%E6%8E%A5%E5%A5%97%E7%94%A8%E5%9C%A8%E7%A9%8D%E6%9C%A8%E4%B8%8A%E4%BD%BF%E7%94%A8">6.2. 影像分類: 搭配後端影像訓練平台，將訓練好的影像模型直接套用在積木上使用</h4>
<ul>
<li>
<p>影像辨識積木
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210225155832.png" alt="20210225155832"></p>
</li>
<li>
<p>訓練模型</p>
<ol>
<li>
<p>收集大量訓練用的照片，並加以分類
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210225160447.png" alt="20210225160447"></p>
<blockquote>
<p>新增資料集 =&gt; 資料集名稱: dataset0 =&gt; 上傳  Webcam 影像 =&gt; 擷取影像 =&gt; 上傳</p>
</blockquote>
</li>
<li>
<p>訓練資料管理 - 新增剪刀、石頭、步資料集
2.1. 新增剪刀資料集
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye11.png" alt="20210225160447">
2.2. 新增石頭資料集，方法同上。
2.3. 新增步資料集，方法同上。</p>
<p>完成後，如下圖:
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye12.png" alt="20210225160447"></p>
</li>
<li>
<p>建立影像識別模型
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye13.png" alt="20210225160447"></p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye14.png" alt="20210225160447"></p>
<p><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/webeye15.png" alt="20210225160447"></p>
</li>
</ol>
</li>
<li>
<p>使用 Webeye 時</p>
<p>要啟動 camera，需兌換「人臉辨識+情緒感知」卷，才有積木功能。</p>
</li>
</ul>
<h4 id="63-%E4%BA%BA%E8%87%89%E8%BE%A8%E8%AD%98-%E5%8F%AF%E5%81%B5%E6%B8%AC%E4%BA%BA%E8%87%89%E7%89%B9%E5%BE%B5%E5%80%BC%E7%9B%B4%E6%8E%A5%E5%A5%97%E7%94%A8%E5%9C%A8%E7%A9%8D%E6%9C%A8%E4%B8%8A%E4%BD%BF%E7%94%A8">6.3. 人臉辨識: 可偵測人臉特徵值，直接套用在積木上使用</h4>
<ul>
<li>
<p>人臉積木範例</p>
<p>載入人臉模型後，啟動影像來源 (WebCam 或 WebEye)，每秒一次取得人臉特徵</p>
</li>
</ul>
<h4 id="64-%E6%83%85%E7%B7%92%E8%BE%A8%E8%AD%98-%E5%8F%AF%E5%81%B5%E6%B8%AC%E6%83%85%E7%B7%92%E7%9B%B4%E6%8E%A5-%E5%A5%97%E7%94%A8%E5%9C%A8%E7%A9%8D%E6%9C%A8%E4%B8%8A%E4%BD%BF%E7%94%A8">6.4. 情緒辨識: 可偵測情緒，直接 套用在積木上使用</h4>
<p>更詳細使用方式請參考<a href="https://docs.google.com/presentation/d/1QOBeUtaaU6M3H6Y8gqbgk33zAGgML2Rwg8LldE99l-w/edit#slide=id.g5f979813d1_0_356">簡報教學</a></p>
<hr>
<h2 id="%E4%BD%BF%E7%94%A8%E5%85%8C%E6%8F%9B%E5%88%B8-%E9%A0%98%E5%8F%96%E8%88%87%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%8A%9F%E8%83%BD">使用兌換券 (領取與添加新功能)</h2>
<p>Webduino 除了原有的服務，額外提供加值功能，透過輸入「功能兌換券」代碼，就能讓原本的帳號多一項隱藏版功能，例如：專案數增加、Line 程式積木、影像辨識積木...等。</p>
<h3 id="1-%E5%AF%A6%E4%BD%9C%E6%B5%81%E7%A8%8B">1. 實作流程</h3>
<p>首先，進入 Webduino 雲端平台，註冊帳號並登入：<code>https://cloud.webduino.io/</code>
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210221133023.png" alt="登入 Cloud 雲端平台"></p>
<p>接著，點選 Blockly 程式積木
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210221133051.png" alt="點選 Blockly 程式積木"></p>
<p>並於畫面右上角點選「兌換券按鈕」
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210221133115.png" alt="點選兌換券"></p>
<p>輸入增加專案數序號後，按下確定
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210221133140.png" alt="輸入增加專案數序號"></p>
<p>專案數將從原本的 20 個，增加為 50 個
<img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210221133158.png" alt="專案數增加"></p>
<p>相關參考
Webduino 雲端平台：<a href="https://tutorials.webduino.io/zh-tw/docs/cloud/index.html">基本介紹</a></p>
<h2 id="%E9%80%A3%E5%8B%95%E5%A4%9A%E5%A1%8A%E9%96%8B%E7%99%BC%E7%89%88">連動多塊開發版</h2>
<ol>
<li>
<p>首先把開發板的積木放到畫面當中，注意在開發板的積木後方有個可勾選的項目「串聯」，將有需要連動的開發板，就勾選串連，放入「當開發板串連完成後執行」的積木，我們將要執行的事件放在缺口內，如此一來就可以確保開發板都上線完成後才會執行。</p>
<blockquote>
<p>注意，只要有勾選串連的開發板，就一定要使用串連完成的積木。</p>
</blockquote>
<p><a data-fancybox="gallery" href='hhttps://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/multi-board-01.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/multi-board-01_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>把偵測 RFID 的邏輯積木放在「串連完成後執行」的缺口內，當值等於 <code>8C7DDD32</code> ，LED 就會亮起，當不是，LED 就會熄滅。</p>
<p><a data-fancybox="gallery" href='hhttps://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/multi-board-02.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/multi-board-02_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
</ol>
<h2 id="%E4%BD%BF%E7%94%A8%E8%80%85%E8%87%AA%E5%AE%9A%E7%BE%A9%E5%87%BD%E5%BC%8F">使用者自定義函式</h2>
<p><strong>流程</strong>，在程式碼裡面就是 <code>function</code>，在寫程式的時候，常常會遇到需要重複執行的程式碼，這些重複的程式碼可能從十幾行道幾百行不等，如果每重複一次都得重寫一次，勢必會造成不小的困擾，所以我們可以設定一個流程，並在這個流程中寫入對應程式碼，如此一來，當我們需要重複用到這些程式碼的時候，只要呼叫這段流程，就可以重複執行對應的程式。</p>
<p>官網介紹: <code>https://tutorials.webduino.io/zh-tw/docs/blockly/standard/functions.html</code></p>
<h2 id="%E8%87%AA%E8%A8%82%E7%A9%8D%E6%9C%A8">[自訂積木]</h2>
<h3 id="1-%E6%B3%95%E8%98%AD%E6%96%AF%E8%87%AA%E8%A8%82%E7%A9%8D%E6%9C%A8%E6%B8%85%E5%96%AE">1. 法蘭斯自訂積木清單</h3>
<p><code>https://github.com/fustyles/webduino/blob/master/CustomBlock.txt</code></p>
<h3 id="2-%E5%A2%9E%E5%8A%A0%E6%9C%AC%E5%8A%9F%E8%83%BD%E4%B9%8B%E6%93%8D%E4%BD%9C">2. 增加本功能之操作</h3>
<p>左下角齒輪 -&gt; 積木[使用自有積木] -&gt; 匯入</p>
<p>自訂積木: <code>https://fustyles.github.io/webduino/EDU_addCustomBlocks/blockly.json</code></p>
<h3 id="3-%E5%90%84%E7%A8%AE%E6%87%89%E7%94%A8">3. 各種應用</h3>
<h4 id="%E4%BA%BA%E8%87%89%E8%BE%A8%E8%AD%98-tfjs-face-apijs">人臉辨識 (tfjs face-api.js)</h4>
<ul>
<li>
<p>說明
使用face-api.js (TensorFlow.js)卷積神經網絡（CNN）開發的Webduino自訂積木程式，可擷取人臉128 個值的特徵向量經分類器(如歐氏距離)辨識影像當中的人臉相似度的距離。可應用於機場出入關、智慧型手機解鎖、上下班打卡、智慧ATM、智慧住宅等。</p>
<blockquote>
<p>參考資料： <code>https://omnixri.blogspot.com/2020/12/ai.html</code></p>
</blockquote>
</li>
<li>
<p>匯入網址: <code>https://fustyles.github.io/webduino/faceapi_recognize_20201012/blockly.json</code></p>
</li>
<li>
<p>積木範例: <code>https://blocklypro.webduino.io/#XJLeox51d8</code></p>
</li>
</ul>
<ol>
<li>
<p>比對照片資料夾格式參考:</p>
<ul>
<li>github: <code>&quot;https://fustyles.github.io/webduino/faceapi_20200402/facelist/&quot;</code></li>
<li>本機端:  <code>webduino/faceapi_20200402/facelist/</code></li>
</ul>
</li>
<li>
<p>下載模型資料夾放在</p>
<ul>
<li>github: <code>&quot;https://fustyles.github.io/webduino/faceapi_20200402/&quot;</code></li>
<li>本機網站上執行: webduino/faceapi_20200402/</li>
</ul>
</li>
</ol>
<h4 id="%E5%85%A8%E8%BA%AB%E8%BE%A8%E8%AD%98-mediapipe-holistic">全身辨識 (MediaPipe Holistic)</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/holistic_20201012/blockly.json</code></li>
</ul>
<h4 id="google-%E8%A9%A6%E7%AE%97%E8%A1%A8-sql-%E8%AA%9E%E6%B3%95%E6%9F%A5%E8%A9%A2">Google 試算表 SQL 語法查詢</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/SpreadsheetSQL_20210403/blockly.json</code></li>
</ul>
<h4 id="barcode-%E8%BE%A8%E8%AD%98">Barcode 辨識</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/barcode_20210216/blockly.json</code></li>
</ul>
<h4 id="qr-code-%E8%BE%A8%E8%AD%98-instascan">QR code 辨識 (instascan)</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/instascan.js_20201012/blockly.json</code></li>
</ul>
<h4 id="%E6%96%87%E5%AD%97%E8%BE%A8%E8%AD%98-tesseractjs">文字辨識 (tesseract.js)</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/tesseract.js_20201012/blockly.json</code></li>
</ul>
<h4 id="%E8%87%89%E9%83%A8%E5%81%B5%E6%B8%AC-trackingjs">臉部偵測 (Tracking.js)</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/trackingface_20201012/blockly.json</code></li>
</ul>
<h4 id="%E9%A1%8F%E8%89%B2%E5%81%B5%E6%B8%AC-trackingjs">顏色偵測 (Tracking.js)</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/trackingcolor_20201012/blockly.json</code></li>
</ul>
<h4 id="%E6%B7%B1%E5%BA%A6%E5%AD%B8%E7%BF%92-tfjs-knn-classifier">深度學習 (tfjs KNN-Classifier)</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/knn-classifier_20201012/blockly.json</code></li>
</ul>
<h4 id="%E8%87%89%E9%83%A8%E5%81%B5%E6%B8%AC-tfjs-face-apijs">臉部偵測 (tfjs face-api.js)</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/faceapi_detect_20201012/blockly.json</code></li>
</ul>
<h4 id="%E5%A7%BF%E6%85%8B%E5%81%B5%E6%B8%AC-tfjs-posenet">姿態偵測 (tfjs posenet)</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/posenet_20201012/blockly.json</code></li>
</ul>
<h4 id="%E8%87%89%E9%83%A8%E5%81%B5%E6%B8%AC-tfjs-blazeface">臉部偵測 (tfjs blazeface)</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/Blazeface_20201012/blockly.json</code></li>
</ul>
<h4 id="%E7%89%A9%E4%BB%B6%E5%81%B5%E6%B8%AC-microsoft-azure-custom-vision">物件偵測 (Microsoft Azure Custom Vision)</h4>
<ul>
<li>
<p>匯入網址: <code>https://fustyles.github.io/webduino/Azure_ClassifyImage_20190901/blockly.json</code></p>
</li>
<li>
<p>積木: 進階功能 &gt; 自訂視覺</p>
<p><a data-fancybox="gallery" href='hhttps://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/Azure_Custom_Vision.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/Azure_Custom_Vision_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
</ul>
<h4 id="%E7%89%A9%E4%BB%B6%E5%81%B5%E6%B8%AC-tfjs-coco-ssd">物件偵測 (tfjs coco-ssd)</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/coco-ssd_20201012/blockly.json</code></li>
</ul>
<h4 id="%E7%89%A9%E4%BB%B6%E5%81%B5%E6%B8%AC-tfjs-mobilenet20201012">物件偵測 (tfjs mobilenet_20201012)</h4>
<ul>
<li>匯入網址: <code>https://fustyles.github.io/webduino/mobilenet_20201012/blockly.json</code></li>
</ul>
<h4 id="%E6%A9%9F%E5%99%A8%E5%AD%B8%E7%BF%92-tfjs-teachable-machine">機器學習 (tfjs teachable machine)</h4>
<ul>
<li>
<p>匯入網址: <code>https://fustyles.github.io/webduino/teachablemachine_20201012/blockly.json</code></p>
</li>
<li>
<p>積木: 進階功能 &gt; 機器學習 (自訂模型)</p>
<p><a data-fancybox="gallery" href='hhttps://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/teachablemachine.jpg'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/teachablemachine_s.jpg' class="nofancybox  img-center" /></a></p>
</li>
</ul>
<h4 id=""></h4>
<ul>
<li>匯入網址: ``</li>
</ul>
<h4 id=""></h4>
<ul>
<li>匯入網址: ``</li>
</ul>
<h4 id=""></h4>
<ul>
<li>匯入網址: ``</li>
</ul>
<h4 id=""></h4>
<ul>
<li>匯入網址: ``</li>
</ul>
<h4 id=""></h4>
<ul>
<li>匯入網址: ``</li>
</ul>
<h4 id=""></h4>
<ul>
<li>匯入網址: ``</li>
</ul>
<h4 id=""></h4>
<ul>
<li>匯入網址: ``</li>
</ul>
<h4 id=""></h4>
<ul>
<li>匯入網址: ``</li>
</ul>
<h4 id=""></h4>
<ul>
<li>匯入網址: ``</li>
</ul>
<h4 id=""></h4>
<ul>
<li>匯入網址: ``</li>
</ul>
<h4 id=""></h4>
<ul>
<li>匯入網址: ``</li>
</ul>
<p><a href="https://teachablemachine.withgoogle.com/models/yz3DC_pki/">https://teachablemachine.withgoogle.com/models/yz3DC_pki/</a></p>
<hr>

</body>
</html>
